

<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="icon" href="../../../_static/favicon.ico">
    
    
      
        <title>kfp.client.client - KFP SDK API Reference</title>
      
    
    
      <link rel="stylesheet" href="../../../_static/stylesheets/main.2014a6d7.min.css">
      
        
        <link rel="stylesheet" href="../../../_static/stylesheets/palette.92c9fe4a.min.css">
        
      
    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Open Sans";--md-code-font:"Roboto Mono"}</style>
      
    
        <link rel="stylesheet" type="text/css" href="../../../_static/custom.css" />
    <script>__md_scope=new URL("../../..",location),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="slate" data-md-color-primary="kfpblue" data-md-color-accent="">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-component="outdated" hidden>
        <aside class="md-banner md-banner--warning">
          
        </aside>
      </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../../index.html" title="KFP SDK API Reference" class="md-header__button md-logo" aria-label="KFP SDK API Reference" data-md-component="logo">
      <img src="../../../_static/kubeflow.png" alt="logo">
    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            KFP SDK API Reference
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              kfp.client.client
            
          </span>
        </div>
      </div>
    </div>
    
      <form class="md-header__option" data-md-component="palette">
        
          
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="kfpblue" data-md-color-accent=""  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
          
            <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_2" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2a7 7 0 0 0-7 7c0 2.38 1.19 4.47 3 5.74V17a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1v-2.26c1.81-1.27 3-3.36 3-5.74a7 7 0 0 0-7-7M9 21a1 1 0 0 0 1 1h4a1 1 0 0 0 1-1v-1H9v1Z"/></svg>
            </label>
          
        
          
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="kfpblue" data-md-color-accent=""  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_2">
          
            <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2a7 7 0 0 1 7 7c0 2.38-1.19 4.47-3 5.74V17a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1v-2.26C6.19 13.47 5 11.38 5 9a7 7 0 0 1 7-7M9 21v-1h6v1a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1m3-17a5 5 0 0 0-5 5c0 2.05 1.23 3.81 3 4.58V16h4v-2.42c1.77-.77 3-2.53 3-4.58a5 5 0 0 0-5-5Z"/></svg>
            </label>
          
        
      </form>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" aria-label="Share" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08Z"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/kubeflow/pipelines/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    pipelines
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../../index.html" title="KFP SDK API Reference" class="md-nav__button md-logo" aria-label="KFP SDK API Reference" data-md-component="logo">
      <img src="../../../_static/kubeflow.png" alt="logo">
    </a>
    KFP SDK API Reference
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/kubeflow/pipelines/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    pipelines
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1" data-md-state="indeterminate" type="checkbox" id="__nav_1" checked>
      
      
      
        <label class="md-nav__link" for="__nav_1">
          <span class="md-ellipsis">Contents</span>
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Contents" data-md-level="1">
        <label class="md-nav__title" for="__nav_1">
          <span class="md-nav__icon md-icon"></span>
          <span class="md-ellipsis">Contents</span>
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../index.html" class="md-nav__link">
        <span title="index (document)" class="md-ellipsis">Home</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../source/kfp.html" class="md-nav__link">
        <span title="source/kfp (document)" class="md-ellipsis">API Reference</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../source/cli.html" class="md-nav__link">
        <span title="source/cli (document)" class="md-ellipsis">kfp CLI</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="https://kubeflow.org/docs/pipelines/" class="md-nav__link">
        <span class="md-ellipsis">Usage Docs <wbr>(kubeflow.<wbr>org)</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="https://github.com/kubeflow/pipelines/" class="md-nav__link">
        <span class="md-ellipsis">Source Code</span>
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary">
  
  
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset" role="main">
                
  <a href="https://github.com/kubeflow/pipelines/blob/master/docs/_modules/kfp/client/client.rst" title="Edit this page" class="md-content__button md-icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25Z"/></svg>
  </a>



  <h1>Source code for kfp.client.client</h1><div class="highlight"><pre>
<span></span><code><span class="c1"># Copyright 2022 The Kubeflow Authors</span>
<span class="c1">#</span>
<span class="c1"># Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);</span>
<span class="c1"># you may not use this file except in compliance with the License.</span>
<span class="c1"># You may obtain a copy of the License at</span>
<span class="c1">#</span>
<span class="c1">#      http://www.apache.org/licenses/LICENSE-2.0</span>
<span class="c1">#</span>
<span class="c1"># Unless required by applicable law or agreed to in writing, software</span>
<span class="c1"># distributed under the License is distributed on an &quot;AS IS&quot; BASIS,</span>
<span class="c1"># WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</span>
<span class="c1"># See the License for the specific language governing permissions and</span>
<span class="c1"># limitations under the License.</span>
<span class="sd">&quot;&quot;&quot;The SDK client for Kubeflow Pipelines API.&quot;&quot;&quot;</span>

<span class="kn">import</span> <span class="nn">copy</span>
<span class="kn">import</span> <span class="nn">datetime</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">logging</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">re</span>
<span class="kn">import</span> <span class="nn">tarfile</span>
<span class="kn">import</span> <span class="nn">tempfile</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">from</span> <span class="nn">types</span> <span class="kn">import</span> <span class="n">ModuleType</span>
<span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Any</span><span class="p">,</span> <span class="n">Callable</span><span class="p">,</span> <span class="n">List</span><span class="p">,</span> <span class="n">Mapping</span><span class="p">,</span> <span class="n">Optional</span>
<span class="kn">import</span> <span class="nn">warnings</span>
<span class="kn">import</span> <span class="nn">zipfile</span>

<span class="kn">from</span> <span class="nn">kfp</span> <span class="kn">import</span> <span class="n">compiler</span>
<span class="kn">from</span> <span class="nn">kfp.client</span> <span class="kn">import</span> <span class="n">auth</span>
<span class="kn">import</span> <span class="nn">kfp_server_api</span>
<span class="kn">import</span> <span class="nn">yaml</span>

<span class="c1"># Operators on scalar values. Only applies to one of |int_value|,</span>
<span class="c1"># |long_value|, |string_value| or |timestamp_value|.</span>
<span class="n">_FILTER_OPERATIONS</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;UNKNOWN&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s1">&#39;EQUALS&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="s1">&#39;NOT_EQUALS&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
    <span class="s1">&#39;GREATER_THAN&#39;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
    <span class="s1">&#39;GREATER_THAN_EQUALS&#39;</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span>
    <span class="s1">&#39;LESS_THAN&#39;</span><span class="p">:</span> <span class="mi">6</span><span class="p">,</span>
    <span class="s1">&#39;LESS_THAN_EQUALS&#39;</span><span class="p">:</span> <span class="mi">7</span>
<span class="p">}</span>

<span class="n">KF_PIPELINES_ENDPOINT_ENV</span> <span class="o">=</span> <span class="s1">&#39;KF_PIPELINES_ENDPOINT&#39;</span>
<span class="n">KF_PIPELINES_UI_ENDPOINT_ENV</span> <span class="o">=</span> <span class="s1">&#39;KF_PIPELINES_UI_ENDPOINT&#39;</span>
<span class="n">KF_PIPELINES_DEFAULT_EXPERIMENT_NAME</span> <span class="o">=</span> <span class="s1">&#39;KF_PIPELINES_DEFAULT_EXPERIMENT_NAME&#39;</span>
<span class="n">KF_PIPELINES_OVERRIDE_EXPERIMENT_NAME</span> <span class="o">=</span> <span class="s1">&#39;KF_PIPELINES_OVERRIDE_EXPERIMENT_NAME&#39;</span>
<span class="n">KF_PIPELINES_IAP_OAUTH2_CLIENT_ID_ENV</span> <span class="o">=</span> <span class="s1">&#39;KF_PIPELINES_IAP_OAUTH2_CLIENT_ID&#39;</span>
<span class="n">KF_PIPELINES_APP_OAUTH2_CLIENT_ID_ENV</span> <span class="o">=</span> <span class="s1">&#39;KF_PIPELINES_APP_OAUTH2_CLIENT_ID&#39;</span>
<span class="n">KF_PIPELINES_APP_OAUTH2_CLIENT_SECRET_ENV</span> <span class="o">=</span> <span class="s1">&#39;KF_PIPELINES_APP_OAUTH2_CLIENT_SECRET&#39;</span>


<span class="k">class</span> <span class="nc">JobConfig</span><span class="p">:</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span> <span class="n">spec</span><span class="p">:</span> <span class="n">kfp_server_api</span><span class="o">.</span><span class="n">ApiPipelineSpec</span><span class="p">,</span>
            <span class="n">resource_references</span><span class="p">:</span> <span class="n">kfp_server_api</span><span class="o">.</span><span class="n">ApiResourceReference</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">spec</span> <span class="o">=</span> <span class="n">spec</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">resource_references</span> <span class="o">=</span> <span class="n">resource_references</span>


<span class="k">class</span> <span class="nc">RunPipelineResult</span><span class="p">:</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">client</span><span class="p">:</span> <span class="s1">&#39;Client&#39;</span><span class="p">,</span>
                 <span class="n">run_info</span><span class="p">:</span> <span class="n">kfp_server_api</span><span class="o">.</span><span class="n">ApiRun</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_client</span> <span class="o">=</span> <span class="n">client</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">run_info</span> <span class="o">=</span> <span class="n">run_info</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">run_id</span> <span class="o">=</span> <span class="n">run_info</span><span class="o">.</span><span class="n">id</span>

    <span class="k">def</span> <span class="nf">wait_for_run_completion</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="n">timeout</span> <span class="o">=</span> <span class="n">timeout</span> <span class="ow">or</span> <span class="n">datetime</span><span class="o">.</span><span class="n">timedelta</span><span class="o">.</span><span class="n">max</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">wait_for_run_completion</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">run_id</span><span class="p">,</span> <span class="n">timeout</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s1">&#39;RunPipelineResult(run_id=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">run_id</span><span class="si">}</span><span class="s1">)&#39;</span>


<div class="viewcode-block" id="Client"><a class="viewcode-back" href="../../../source/client.html#kfp.client.Client">[docs]</a><span class="k">class</span> <span class="nc">Client</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;The API Client for KubeFlow Pipelines.</span>

<span class="sd">    Args:</span>
<span class="sd">        host: The host name to use to talk to Kubeflow Pipelines. If not set,</span>
<span class="sd">            the in-cluster service DNS name will be used, which only works if</span>
<span class="sd">            the current environment is a pod in the same cluster (such as a</span>
<span class="sd">            Jupyter instance spawned by Kubeflow&#39;s JupyterHub).</span>
<span class="sd">            Set the host based on</span>
<span class="sd">            https://www.kubeflow.org/docs/components/pipelines/sdk/connect-api/</span>
<span class="sd">        client_id: The client ID used by Identity-Aware Proxy.</span>
<span class="sd">        namespace: The namespace where the kubeflow pipeline system is run.</span>
<span class="sd">        other_client_id: The client ID used to obtain the auth codes and refresh</span>
<span class="sd">            tokens. References:</span>
<span class="sd">            https://cloud.google.com/iap/docs/authentication-howto#authenticating_from_a_desktop_app.</span>
<span class="sd">        other_client_secret: The client secret used to obtain the auth codes and</span>
<span class="sd">            refresh tokens.</span>
<span class="sd">        existing_token: Pass in token directly, it&#39;s used for cases better get</span>
<span class="sd">            token outside of SDK, e.x. GCP Cloud Functions or caller already has</span>
<span class="sd">            a token.</span>
<span class="sd">        cookies: CookieJar object containing cookies that will be passed to the</span>
<span class="sd">            pipelines API.</span>
<span class="sd">        proxy: HTTP or HTTPS proxy server.</span>
<span class="sd">        ssl_ca_cert: Cert for proxy.</span>
<span class="sd">        kube_context: String name of context within kubeconfig to use, defaults</span>
<span class="sd">            to the current-context set within kubeconfig.</span>
<span class="sd">        credentials: A TokenCredentialsBase object which provides the logic to</span>
<span class="sd">            populate the requests with credentials to authenticate against the</span>
<span class="sd">            API server.</span>
<span class="sd">        ui_host: Base url to use to open the Kubeflow Pipelines UI. This is used</span>
<span class="sd">            when running the client from a notebook to generate and print links.</span>
<span class="sd">        verify_ssl: Whether to verify the servers TLS certificate or not.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1"># in-cluster DNS name of the pipeline service</span>
    <span class="n">IN_CLUSTER_DNS_NAME</span> <span class="o">=</span> <span class="s1">&#39;ml-pipeline.</span><span class="si">{}</span><span class="s1">.svc.cluster.local:8888&#39;</span>
    <span class="n">KUBE_PROXY_PATH</span> <span class="o">=</span> <span class="s1">&#39;api/v1/namespaces/</span><span class="si">{}</span><span class="s1">/services/ml-pipeline:http/proxy/&#39;</span>

    <span class="c1"># Auto populated path in pods</span>
    <span class="c1"># https://kubernetes.io/docs/tasks/access-application-cluster/access-cluster/#accessing-the-api-from-a-pod</span>
    <span class="c1"># https://kubernetes.io/docs/reference/access-authn-authz/service-accounts-admin/#serviceaccount-admission-controller</span>
    <span class="n">NAMESPACE_PATH</span> <span class="o">=</span> <span class="s1">&#39;/var/run/secrets/kubernetes.io/serviceaccount/namespace&#39;</span>

    <span class="n">LOCAL_KFP_CONTEXT</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="s1">&#39;~/.config/kfp/context.json&#39;</span><span class="p">)</span>

    <span class="c1"># TODO: Wrap the configurations for different authentication methods.</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">host</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">client_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">namespace</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;kubeflow&#39;</span><span class="p">,</span>
        <span class="n">other_client_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">other_client_secret</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">existing_token</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">cookies</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">proxy</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">ssl_ca_cert</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">kube_context</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">credentials</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">ui_host</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">verify_ssl</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Create a new instance of kfp client.&quot;&quot;&quot;</span>
        <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
            <span class="s1">&#39;This client only works with Kubeflow Pipeline v2.0.0-alpha.0 &#39;</span>
            <span class="s1">&#39;and later versions.&#39;</span><span class="p">,</span>
            <span class="n">category</span><span class="o">=</span><span class="ne">FutureWarning</span><span class="p">)</span>

        <span class="n">host</span> <span class="o">=</span> <span class="n">host</span> <span class="ow">or</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">KF_PIPELINES_ENDPOINT_ENV</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_uihost</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">KF_PIPELINES_UI_ENDPOINT_ENV</span><span class="p">,</span> <span class="n">ui_host</span> <span class="ow">or</span>
                                      <span class="n">host</span><span class="p">)</span>
        <span class="n">client_id</span> <span class="o">=</span> <span class="n">client_id</span> <span class="ow">or</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
            <span class="n">KF_PIPELINES_IAP_OAUTH2_CLIENT_ID_ENV</span><span class="p">)</span>
        <span class="n">other_client_id</span> <span class="o">=</span> <span class="n">other_client_id</span> <span class="ow">or</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
            <span class="n">KF_PIPELINES_APP_OAUTH2_CLIENT_ID_ENV</span><span class="p">)</span>
        <span class="n">other_client_secret</span> <span class="o">=</span> <span class="n">other_client_secret</span> <span class="ow">or</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
            <span class="n">KF_PIPELINES_APP_OAUTH2_CLIENT_SECRET_ENV</span><span class="p">)</span>
        <span class="n">config</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_load_config</span><span class="p">(</span><span class="n">host</span><span class="p">,</span> <span class="n">client_id</span><span class="p">,</span> <span class="n">namespace</span><span class="p">,</span> <span class="n">other_client_id</span><span class="p">,</span>
                                   <span class="n">other_client_secret</span><span class="p">,</span> <span class="n">existing_token</span><span class="p">,</span> <span class="n">proxy</span><span class="p">,</span>
                                   <span class="n">ssl_ca_cert</span><span class="p">,</span> <span class="n">kube_context</span><span class="p">,</span> <span class="n">credentials</span><span class="p">,</span>
                                   <span class="n">verify_ssl</span><span class="p">)</span>
        <span class="c1"># Save the loaded API client configuration, as a reference if update is</span>
        <span class="c1"># needed.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_load_context_setting_or_default</span><span class="p">()</span>

        <span class="c1"># If custom namespace provided, overwrite the loaded or default one in</span>
        <span class="c1"># context settings for current client instance</span>
        <span class="k">if</span> <span class="n">namespace</span> <span class="o">!=</span> <span class="s1">&#39;kubeflow&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_context_setting</span><span class="p">[</span><span class="s1">&#39;namespace&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">namespace</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_existing_config</span> <span class="o">=</span> <span class="n">config</span>
        <span class="k">if</span> <span class="n">cookies</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">cookies</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_context_setting</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;client_authentication_cookie&#39;</span><span class="p">)</span>
        <span class="n">api_client</span> <span class="o">=</span> <span class="n">kfp_server_api</span><span class="o">.</span><span class="n">ApiClient</span><span class="p">(</span>
            <span class="n">config</span><span class="p">,</span>
            <span class="n">cookie</span><span class="o">=</span><span class="n">cookies</span><span class="p">,</span>
            <span class="n">header_name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_context_setting</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
                <span class="s1">&#39;client_authentication_header_name&#39;</span><span class="p">),</span>
            <span class="n">header_value</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_context_setting</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
                <span class="s1">&#39;client_authentication_header_value&#39;</span><span class="p">))</span>
        <span class="n">_add_generated_apis</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">kfp_server_api</span><span class="p">,</span> <span class="n">api_client</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_job_api</span> <span class="o">=</span> <span class="n">kfp_server_api</span><span class="o">.</span><span class="n">JobServiceApi</span><span class="p">(</span><span class="n">api_client</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_run_api</span> <span class="o">=</span> <span class="n">kfp_server_api</span><span class="o">.</span><span class="n">RunServiceApi</span><span class="p">(</span><span class="n">api_client</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_experiment_api</span> <span class="o">=</span> <span class="n">kfp_server_api</span><span class="o">.</span><span class="n">ExperimentServiceApi</span><span class="p">(</span><span class="n">api_client</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_pipelines_api</span> <span class="o">=</span> <span class="n">kfp_server_api</span><span class="o">.</span><span class="n">PipelineServiceApi</span><span class="p">(</span><span class="n">api_client</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_upload_api</span> <span class="o">=</span> <span class="n">kfp_server_api</span><span class="o">.</span><span class="n">PipelineUploadServiceApi</span><span class="p">(</span><span class="n">api_client</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_healthz_api</span> <span class="o">=</span> <span class="n">kfp_server_api</span><span class="o">.</span><span class="n">HealthzServiceApi</span><span class="p">(</span><span class="n">api_client</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_context_setting</span><span class="p">[</span><span class="s1">&#39;namespace&#39;</span><span class="p">]</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_kfp_healthz</span><span class="p">(</span>
        <span class="p">)</span><span class="o">.</span><span class="n">multi_user</span> <span class="ow">is</span> <span class="kc">True</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">Client</span><span class="o">.</span><span class="n">NAMESPACE_PATH</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
                    <span class="n">current_namespace</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">set_user_namespace</span><span class="p">(</span><span class="n">current_namespace</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">FileNotFoundError</span><span class="p">:</span>
                <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
                    <span class="s1">&#39;Failed to automatically set namespace.&#39;</span><span class="p">,</span> <span class="n">exc_info</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_load_config</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span> <span class="n">host</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">client_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">namespace</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
            <span class="n">other_client_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">other_client_secret</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span>
            <span class="n">existing_token</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">proxy</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span>
            <span class="n">ssl_ca_cert</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">kube_context</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span>
            <span class="n">credentials</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span>
            <span class="n">verify_ssl</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">kfp_server_api</span><span class="o">.</span><span class="n">Configuration</span><span class="p">:</span>
        <span class="n">config</span> <span class="o">=</span> <span class="n">kfp_server_api</span><span class="o">.</span><span class="n">Configuration</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">proxy</span><span class="p">:</span>
            <span class="c1"># https://github.com/kubeflow/pipelines/blob/c6ac5e0b1fd991e19e96419f0f508ec0a4217c29/backend/api/python_http_client/kfp_server_api/rest.py#L100</span>
            <span class="n">config</span><span class="o">.</span><span class="n">proxy</span> <span class="o">=</span> <span class="n">proxy</span>
        <span class="k">if</span> <span class="n">verify_ssl</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">config</span><span class="o">.</span><span class="n">verify_ssl</span> <span class="o">=</span> <span class="n">verify_ssl</span>

        <span class="k">if</span> <span class="n">ssl_ca_cert</span><span class="p">:</span>
            <span class="n">config</span><span class="o">.</span><span class="n">ssl_ca_cert</span> <span class="o">=</span> <span class="n">ssl_ca_cert</span>

        <span class="n">host</span> <span class="o">=</span> <span class="n">host</span> <span class="ow">or</span> <span class="s1">&#39;&#39;</span>

        <span class="c1"># Defaults to &#39;https&#39; if host does not contain &#39;http&#39; or &#39;https&#39; protocol.</span>
        <span class="k">if</span> <span class="n">host</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">host</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;http&#39;</span><span class="p">):</span>
            <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
                <span class="sa">f</span><span class="s1">&#39;The host </span><span class="si">{</span><span class="n">host</span><span class="si">}</span><span class="s1"> does not contain the &quot;http&quot; or &quot;https&quot; protocol. Defaults to &quot;https&quot;.&#39;</span>
            <span class="p">)</span>
            <span class="n">host</span> <span class="o">=</span> <span class="s1">&#39;https://&#39;</span> <span class="o">+</span> <span class="n">host</span>

        <span class="c1"># Preprocess the host endpoint to prevent some common user mistakes.</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">client_id</span><span class="p">:</span>
            <span class="c1"># always preserving the protocol (http://localhost requires it)</span>
            <span class="n">host</span> <span class="o">=</span> <span class="n">host</span><span class="o">.</span><span class="n">rstrip</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">host</span><span class="p">:</span>
            <span class="n">config</span><span class="o">.</span><span class="n">host</span> <span class="o">=</span> <span class="n">host</span>

        <span class="n">token</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="c1"># &quot;existing_token&quot; is designed to accept token generated outside of SDK.</span>
        <span class="c1">#</span>
        <span class="c1"># https://cloud.google.com/functions/docs/securing/function-identity</span>
        <span class="c1"># https://cloud.google.com/endpoints/docs/grpc/service-account-authentication</span>
        <span class="c1">#</span>
        <span class="c1"># Here is an example.</span>
        <span class="c1">#</span>
        <span class="c1"># import requests</span>
        <span class="c1"># import kfp</span>
        <span class="c1">#</span>
        <span class="c1"># def get_access_token():</span>
        <span class="c1">#     url = &#39;http://metadata.google.internal/computeMetadata/v1/instance/service-accounts/default/token&#39;</span>
        <span class="c1">#     r = requests.get(url, headers={&#39;Metadata-Flavor&#39;: &#39;Google&#39;})</span>
        <span class="c1">#     r.raise_for_status()</span>
        <span class="c1">#     access_token = r.json()[&#39;access_token&#39;]</span>
        <span class="c1">#     return access_token</span>
        <span class="c1">#</span>
        <span class="c1"># client = kfp.Client(host=&#39;&lt;KFPHost&gt;&#39;, existing_token=get_access_token())</span>
        <span class="c1">#</span>
        <span class="k">if</span> <span class="n">existing_token</span><span class="p">:</span>
            <span class="n">token</span> <span class="o">=</span> <span class="n">existing_token</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_is_refresh_token</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">elif</span> <span class="n">client_id</span><span class="p">:</span>
            <span class="n">token</span> <span class="o">=</span> <span class="n">auth</span><span class="o">.</span><span class="n">get_auth_token</span><span class="p">(</span><span class="n">client_id</span><span class="p">,</span> <span class="n">other_client_id</span><span class="p">,</span>
                                        <span class="n">other_client_secret</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_is_refresh_token</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_inverse_proxy_host</span><span class="p">(</span><span class="n">host</span><span class="p">):</span>
            <span class="n">token</span> <span class="o">=</span> <span class="n">auth</span><span class="o">.</span><span class="n">get_gcp_access_token</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_is_refresh_token</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">elif</span> <span class="n">credentials</span><span class="p">:</span>
            <span class="n">config</span><span class="o">.</span><span class="n">api_key</span><span class="p">[</span><span class="s1">&#39;authorization&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;placeholder&#39;</span>
            <span class="n">config</span><span class="o">.</span><span class="n">api_key_prefix</span><span class="p">[</span><span class="s1">&#39;authorization&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;Bearer&#39;</span>
            <span class="n">config</span><span class="o">.</span><span class="n">refresh_api_key_hook</span> <span class="o">=</span> <span class="n">credentials</span><span class="o">.</span><span class="n">refresh_api_key_hook</span>

        <span class="k">if</span> <span class="n">token</span><span class="p">:</span>
            <span class="n">config</span><span class="o">.</span><span class="n">api_key</span><span class="p">[</span><span class="s1">&#39;authorization&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">token</span>
            <span class="n">config</span><span class="o">.</span><span class="n">api_key_prefix</span><span class="p">[</span><span class="s1">&#39;authorization&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;Bearer&#39;</span>
            <span class="k">return</span> <span class="n">config</span>

        <span class="k">if</span> <span class="n">host</span><span class="p">:</span>
            <span class="c1"># if host is explicitly set with auth token, it&#39;s probably a port</span>
            <span class="c1"># forward address.</span>
            <span class="k">return</span> <span class="n">config</span>

        <span class="kn">import</span> <span class="nn">kubernetes</span> <span class="k">as</span> <span class="nn">k8s</span>
        <span class="n">in_cluster</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">k8s</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">load_incluster_config</span><span class="p">()</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="n">in_cluster</span> <span class="o">=</span> <span class="kc">False</span>

        <span class="k">if</span> <span class="n">in_cluster</span><span class="p">:</span>
            <span class="n">config</span><span class="o">.</span><span class="n">host</span> <span class="o">=</span> <span class="n">Client</span><span class="o">.</span><span class="n">IN_CLUSTER_DNS_NAME</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">namespace</span><span class="p">)</span>
            <span class="n">config</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_config_with_default_credentials</span><span class="p">(</span><span class="n">config</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">config</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">k8s</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">load_kube_config</span><span class="p">(</span>
                <span class="n">client_configuration</span><span class="o">=</span><span class="n">config</span><span class="p">,</span> <span class="n">context</span><span class="o">=</span><span class="n">kube_context</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Failed to load kube config.&#39;</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">config</span>

        <span class="k">if</span> <span class="n">config</span><span class="o">.</span><span class="n">host</span><span class="p">:</span>
            <span class="n">config</span><span class="o">.</span><span class="n">host</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">host</span> <span class="o">+</span> <span class="s1">&#39;/&#39;</span> <span class="o">+</span> <span class="n">Client</span><span class="o">.</span><span class="n">KUBE_PROXY_PATH</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                <span class="n">namespace</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">config</span>

    <span class="k">def</span> <span class="nf">_is_inverse_proxy_host</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">host</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">host</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;\S+.googleusercontent.com/{0,1}$&#39;</span><span class="p">,</span> <span class="n">host</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;\w+&#39;</span><span class="p">,</span> <span class="n">host</span><span class="p">):</span>
            <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
                <span class="sa">f</span><span class="s1">&#39;The received host is </span><span class="si">{</span><span class="n">host</span><span class="si">}</span><span class="s1">, please include the full endpoint&#39;</span>
                <span class="s1">&#39; address (with &quot;.(pipelines/notebooks).googleusercontent.com&quot;)&#39;</span>
            <span class="p">)</span>
        <span class="k">return</span> <span class="kc">False</span>

    <span class="k">def</span> <span class="nf">_is_ipython</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Returns whether we are running in notebook.&quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="kn">import</span> <span class="nn">IPython</span>
            <span class="n">ipy</span> <span class="o">=</span> <span class="n">IPython</span><span class="o">.</span><span class="n">get_ipython</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">ipy</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">return</span> <span class="kc">False</span>
        <span class="k">except</span> <span class="ne">ImportError</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>

        <span class="k">return</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">_get_url_prefix</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_uihost</span><span class="p">:</span>
            <span class="c1"># User&#39;s own connection.</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_uihost</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;http://&#39;</span><span class="p">)</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">_uihost</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span>
                    <span class="s1">&#39;https://&#39;</span><span class="p">):</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_uihost</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="s1">&#39;http://&#39;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_uihost</span>

        <span class="c1"># In-cluster pod. We could use relative URL.</span>
        <span class="k">return</span> <span class="s1">&#39;/pipeline&#39;</span>

    <span class="k">def</span> <span class="nf">_load_context_setting_or_default</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">Client</span><span class="o">.</span><span class="n">LOCAL_KFP_CONTEXT</span><span class="p">):</span>
            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">Client</span><span class="o">.</span><span class="n">LOCAL_KFP_CONTEXT</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_context_setting</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_context_setting</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s1">&#39;namespace&#39;</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
            <span class="p">}</span>

    <span class="k">def</span> <span class="nf">_refresh_api_client_token</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Refreshes the existing token associated with the kfp_api_client.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;_is_refresh_token&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">):</span>
            <span class="k">return</span>

        <span class="n">new_token</span> <span class="o">=</span> <span class="n">auth</span><span class="o">.</span><span class="n">get_gcp_access_token</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_existing_config</span><span class="o">.</span><span class="n">api_key</span><span class="p">[</span><span class="s1">&#39;authorization&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">new_token</span>

    <span class="k">def</span> <span class="nf">_get_config_with_default_credentials</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span> <span class="n">config</span><span class="p">:</span> <span class="n">kfp_server_api</span><span class="o">.</span><span class="n">Configuration</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">kfp_server_api</span><span class="o">.</span><span class="n">Configuration</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Apply default credentials to the configuration object.</span>

<span class="sd">        This method accepts a Configuration object and extends it with</span>
<span class="sd">        some default credentials interface.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># XXX: The default credentials are audience-based service account tokens</span>
        <span class="c1"># projected by the kubelet (ServiceAccountTokenVolumeCredentials). As we</span>
        <span class="c1"># implement more and more credentials, we can have some heuristic and</span>
        <span class="c1"># choose from a number of options.</span>
        <span class="c1"># See https://github.com/kubeflow/pipelines/pull/5287#issuecomment-805654121</span>

        <span class="c1"># TODO: auth.ServiceAccountCredentials does not exist... dead code path?</span>
        <span class="n">credentials</span> <span class="o">=</span> <span class="n">auth</span><span class="o">.</span><span class="n">ServiceAccountTokenVolumeCredentials</span><span class="p">()</span>
        <span class="n">config_copy</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">config</span><span class="p">)</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">credentials</span><span class="o">.</span><span class="n">refresh_api_key_hook</span><span class="p">(</span><span class="n">config_copy</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s1">&#39;Failed to set up default credentials. Proceeding&#39;</span>
                            <span class="s1">&#39; without credentials...&#39;</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">config</span>

        <span class="n">config</span><span class="o">.</span><span class="n">refresh_api_key_hook</span> <span class="o">=</span> <span class="n">credentials</span><span class="o">.</span><span class="n">refresh_api_key_hook</span>
        <span class="n">config</span><span class="o">.</span><span class="n">api_key_prefix</span><span class="p">[</span><span class="s1">&#39;authorization&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;Bearer&#39;</span>
        <span class="n">config</span><span class="o">.</span><span class="n">refresh_api_key_hook</span><span class="p">(</span><span class="n">config</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">config</span>

<div class="viewcode-block" id="Client.set_user_namespace"><a class="viewcode-back" href="../../../source/client.html#kfp.client.Client.set_user_namespace">[docs]</a>    <span class="k">def</span> <span class="nf">set_user_namespace</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">namespace</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Set user namespace into local context setting file.</span>

<span class="sd">        This function should only be used when Kubeflow Pipelines is in the</span>
<span class="sd">        multi-user mode.</span>

<span class="sd">        Args:</span>
<span class="sd">            namespace: kubernetes namespace the user has access to.</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_context_setting</span><span class="p">[</span><span class="s1">&#39;namespace&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">namespace</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">Client</span><span class="o">.</span><span class="n">LOCAL_KFP_CONTEXT</span><span class="p">)):</span>
            <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">Client</span><span class="o">.</span><span class="n">LOCAL_KFP_CONTEXT</span><span class="p">))</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">Client</span><span class="o">.</span><span class="n">LOCAL_KFP_CONTEXT</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="n">json</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_context_setting</span><span class="p">,</span> <span class="n">f</span><span class="p">)</span></div>

<div class="viewcode-block" id="Client.get_kfp_healthz"><a class="viewcode-back" href="../../../source/client.html#kfp.client.Client.get_kfp_healthz">[docs]</a>    <span class="k">def</span> <span class="nf">get_kfp_healthz</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">kfp_server_api</span><span class="o">.</span><span class="n">ApiGetHealthzResponse</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Gets healthz info of KFP deployment.</span>

<span class="sd">        Returns:</span>
<span class="sd">            json formatted response from the healtz endpoint.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">count</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">response</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">max_attempts</span> <span class="o">=</span> <span class="mi">5</span>
        <span class="k">while</span> <span class="ow">not</span> <span class="n">response</span><span class="p">:</span>
            <span class="n">count</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="k">if</span> <span class="n">count</span> <span class="o">&gt;</span> <span class="n">max_attempts</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">TimeoutError</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s1">&#39;Failed getting healthz endpoint after </span><span class="si">{</span><span class="n">max_attempts</span><span class="si">}</span><span class="s1"> attempts.&#39;</span>
                <span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_healthz_api</span><span class="o">.</span><span class="n">get_healthz</span><span class="p">()</span>
                <span class="k">return</span> <span class="n">response</span>
            <span class="c1"># ApiException, including network errors, is the only type that may</span>
            <span class="c1"># recover after retry.</span>
            <span class="k">except</span> <span class="n">kfp_server_api</span><span class="o">.</span><span class="n">ApiException</span><span class="p">:</span>
                <span class="c1"># logging.exception also logs detailed info about the ApiException</span>
                <span class="n">logging</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s1">&#39;Failed to get healthz info attempt </span><span class="si">{</span><span class="n">count</span><span class="si">}</span><span class="s1"> of 5.&#39;</span><span class="p">)</span>
                <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span></div>

<div class="viewcode-block" id="Client.get_user_namespace"><a class="viewcode-back" href="../../../source/client.html#kfp.client.Client.get_user_namespace">[docs]</a>    <span class="k">def</span> <span class="nf">get_user_namespace</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Get user namespace in context config.</span>

<span class="sd">        Returns:</span>
<span class="sd">            kubernetes namespace from the local context file or empty if it</span>
<span class="sd">            wasn&#39;t set.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_context_setting</span><span class="p">[</span><span class="s1">&#39;namespace&#39;</span><span class="p">]</span></div>

<div class="viewcode-block" id="Client.create_experiment"><a class="viewcode-back" href="../../../source/client.html#kfp.client.Client.create_experiment">[docs]</a>    <span class="k">def</span> <span class="nf">create_experiment</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span>
            <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
            <span class="n">description</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
            <span class="n">namespace</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">kfp_server_api</span><span class="o">.</span><span class="n">ApiExperiment</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Create a new experiment.</span>

<span class="sd">        Args:</span>
<span class="sd">            name: The name of the experiment.</span>
<span class="sd">            description: Description of the experiment.</span>
<span class="sd">            namespace: The Kubernetes namespace where the experiment should be</span>
<span class="sd">                created.</span>
<span class="sd">                For single user deployment, leave it as None;</span>
<span class="sd">                For multi user, input a namespace where the user is authorized.</span>

<span class="sd">        Returns:</span>
<span class="sd">            kfp_server_api.ApiExperiment: ApiExperiment object.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">namespace</span> <span class="o">=</span> <span class="n">namespace</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_user_namespace</span><span class="p">()</span>
        <span class="n">experiment</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">experiment</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_experiment</span><span class="p">(</span>
                <span class="n">experiment_name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="n">namespace</span><span class="o">=</span><span class="n">namespace</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">error</span><span class="p">:</span>
            <span class="c1"># Ignore error if the experiment does not exist.</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">str</span><span class="p">(</span><span class="n">error</span><span class="p">)</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;No experiment is found with name&#39;</span><span class="p">):</span>
                <span class="k">raise</span> <span class="n">error</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">experiment</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Creating experiment </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s1">.&#39;</span><span class="p">)</span>

            <span class="n">resource_references</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">if</span> <span class="n">namespace</span><span class="p">:</span>
                <span class="n">key</span> <span class="o">=</span> <span class="n">kfp_server_api</span><span class="o">.</span><span class="n">ApiResourceKey</span><span class="p">(</span>
                    <span class="nb">id</span><span class="o">=</span><span class="n">namespace</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="n">kfp_server_api</span><span class="o">.</span><span class="n">ApiResourceType</span><span class="o">.</span><span class="n">NAMESPACE</span><span class="p">)</span>
                <span class="n">reference</span> <span class="o">=</span> <span class="n">kfp_server_api</span><span class="o">.</span><span class="n">ApiResourceReference</span><span class="p">(</span>
                    <span class="n">key</span><span class="o">=</span><span class="n">key</span><span class="p">,</span> <span class="n">relationship</span><span class="o">=</span><span class="n">kfp_server_api</span><span class="o">.</span><span class="n">ApiRelationship</span><span class="o">.</span><span class="n">OWNER</span><span class="p">)</span>
                <span class="n">resource_references</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">reference</span><span class="p">)</span>

            <span class="n">experiment</span> <span class="o">=</span> <span class="n">kfp_server_api</span><span class="o">.</span><span class="n">ApiExperiment</span><span class="p">(</span>
                <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
                <span class="n">description</span><span class="o">=</span><span class="n">description</span><span class="p">,</span>
                <span class="n">resource_references</span><span class="o">=</span><span class="n">resource_references</span><span class="p">)</span>
            <span class="n">experiment</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_experiment_api</span><span class="o">.</span><span class="n">create_experiment</span><span class="p">(</span><span class="n">body</span><span class="o">=</span><span class="n">experiment</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_ipython</span><span class="p">():</span>
            <span class="kn">import</span> <span class="nn">IPython</span>
            <span class="n">html</span> <span class="o">=</span> \
                <span class="sa">f</span><span class="s1">&#39;&lt;a href=&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_get_url_prefix</span><span class="p">()</span><span class="si">}</span><span class="s1">/#/experiments/details/</span><span class="si">{</span><span class="n">experiment</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s1">&quot; target=&quot;_blank&quot; &gt;Experiment details&lt;/a&gt;.&#39;</span>
            <span class="n">IPython</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">display</span><span class="p">(</span><span class="n">IPython</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">HTML</span><span class="p">(</span><span class="n">html</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">experiment</span></div>

<div class="viewcode-block" id="Client.get_pipeline_id"><a class="viewcode-back" href="../../../source/client.html#kfp.client.Client.get_pipeline_id">[docs]</a>    <span class="k">def</span> <span class="nf">get_pipeline_id</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;Find the id of a pipeline by name.</span>

<span class="sd">        Args:</span>
<span class="sd">            name: Pipeline name.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The pipeline id if a pipeline with the name exists.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">pipeline_filter</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">({</span>
            <span class="s1">&#39;predicates&#39;</span><span class="p">:</span> <span class="p">[{</span>
                <span class="s1">&#39;op&#39;</span><span class="p">:</span> <span class="n">_FILTER_OPERATIONS</span><span class="p">[</span><span class="s1">&#39;EQUALS&#39;</span><span class="p">],</span>
                <span class="s1">&#39;key&#39;</span><span class="p">:</span> <span class="s1">&#39;name&#39;</span><span class="p">,</span>
                <span class="s1">&#39;stringValue&#39;</span><span class="p">:</span> <span class="n">name</span><span class="p">,</span>
            <span class="p">}]</span>
        <span class="p">})</span>
        <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pipelines_api</span><span class="o">.</span><span class="n">list_pipelines</span><span class="p">(</span><span class="nb">filter</span><span class="o">=</span><span class="n">pipeline_filter</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">result</span><span class="o">.</span><span class="n">pipelines</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">pipelines</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">result</span><span class="o">.</span><span class="n">pipelines</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">id</span>
        <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">pipelines</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s1">&#39;Multiple pipelines with the name: </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s1"> found, the name needs to be unique&#39;</span>
            <span class="p">)</span>
        <span class="k">return</span> <span class="kc">None</span></div>

<div class="viewcode-block" id="Client.list_experiments"><a class="viewcode-back" href="../../../source/client.html#kfp.client.Client.list_experiments">[docs]</a>    <span class="k">def</span> <span class="nf">list_experiments</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">page_token</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
        <span class="n">page_size</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">10</span><span class="p">,</span>
        <span class="n">sort_by</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
        <span class="n">namespace</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="nb">filter</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">kfp_server_api</span><span class="o">.</span><span class="n">ApiListExperimentsResponse</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Lists experiments.</span>

<span class="sd">        Args:</span>
<span class="sd">            page_token: Token for starting of the page.</span>
<span class="sd">            page_size: Size of the page.</span>
<span class="sd">            sort_by: Can be &#39;[field_name]&#39;, &#39;[field_name] desc&#39;. For example,</span>
<span class="sd">                &#39;name desc&#39;.</span>
<span class="sd">            namespace: Kubernetes namespace where the experiment was created.</span>
<span class="sd">                For single user deployment, leave it as None;</span>
<span class="sd">                For multi user, input a namespace where the user is authorized.</span>
<span class="sd">            filter: A url-encoded, JSON-serialized Filter protocol buffer</span>
<span class="sd">                (see [filter.proto](https://github.com/kubeflow/pipelines/blob/master/backend/api/filter.proto)).</span>

<span class="sd">                An example filter string would be:</span>

<span class="sd">                    # For the list of filter operations please see:</span>
<span class="sd">                    # https://github.com/kubeflow/pipelines/blob/master/sdk/python/kfp/client/client.py#L36</span>
<span class="sd">                    json.dumps({</span>
<span class="sd">                        &quot;predicates&quot;: [{</span>
<span class="sd">                            &quot;op&quot;: _FILTER_OPERATIONS[&quot;EQUALS&quot;],</span>
<span class="sd">                            &quot;key&quot;: &quot;name&quot;,</span>
<span class="sd">                            &quot;stringValue&quot;: &quot;my-name&quot;,</span>
<span class="sd">                        }]</span>
<span class="sd">                    })</span>

<span class="sd">        Returns:</span>
<span class="sd">            kfp_server_api.ApiListExperimentsResponse: ApiListExperimentsResponse object.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">namespace</span> <span class="o">=</span> <span class="n">namespace</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_user_namespace</span><span class="p">()</span>
        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_experiment_api</span><span class="o">.</span><span class="n">list_experiment</span><span class="p">(</span>
            <span class="n">page_token</span><span class="o">=</span><span class="n">page_token</span><span class="p">,</span>
            <span class="n">page_size</span><span class="o">=</span><span class="n">page_size</span><span class="p">,</span>
            <span class="n">sort_by</span><span class="o">=</span><span class="n">sort_by</span><span class="p">,</span>
            <span class="n">resource_reference_key_type</span><span class="o">=</span><span class="n">kfp_server_api</span><span class="o">.</span><span class="n">ApiResourceType</span>
            <span class="o">.</span><span class="n">NAMESPACE</span><span class="p">,</span>
            <span class="n">resource_reference_key_id</span><span class="o">=</span><span class="n">namespace</span><span class="p">,</span>
            <span class="nb">filter</span><span class="o">=</span><span class="nb">filter</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">response</span></div>

<div class="viewcode-block" id="Client.get_experiment"><a class="viewcode-back" href="../../../source/client.html#kfp.client.Client.get_experiment">[docs]</a>    <span class="k">def</span> <span class="nf">get_experiment</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                       <span class="n">experiment_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                       <span class="n">experiment_name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                       <span class="n">namespace</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">kfp_server_api</span><span class="o">.</span><span class="n">ApiExperiment</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Gets details of an experiment.</span>

<span class="sd">        Either experiment_id or experiment_name is required.</span>

<span class="sd">        Args:</span>
<span class="sd">            experiment_id (Optional): Id of the experiment.</span>
<span class="sd">            experiment_name (Optional): Name of the experiment.</span>
<span class="sd">            namespace: Kubernetes namespace where the experiment was created.</span>
<span class="sd">                For single user deployment, leave it as None;</span>
<span class="sd">                For multi user, input the namespace where the user is authorized.</span>

<span class="sd">        Returns:</span>
<span class="sd">            kfp_server_api.ApiExperiment: ApiExperiment object.</span>

<span class="sd">        Raises:</span>
<span class="sd">            kfp_server_api.ApiException: If experiment is not found or None of</span>
<span class="sd">              the arguments is provided</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">namespace</span> <span class="o">=</span> <span class="n">namespace</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_user_namespace</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">experiment_id</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">experiment_name</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="s1">&#39;Either experiment_id or experiment_name is required&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">experiment_id</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_experiment_api</span><span class="o">.</span><span class="n">get_experiment</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="n">experiment_id</span><span class="p">)</span>
        <span class="n">experiment_filter</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">({</span>
            <span class="s1">&#39;predicates&#39;</span><span class="p">:</span> <span class="p">[{</span>
                <span class="s1">&#39;op&#39;</span><span class="p">:</span> <span class="n">_FILTER_OPERATIONS</span><span class="p">[</span><span class="s1">&#39;EQUALS&#39;</span><span class="p">],</span>
                <span class="s1">&#39;key&#39;</span><span class="p">:</span> <span class="s1">&#39;name&#39;</span><span class="p">,</span>
                <span class="s1">&#39;stringValue&#39;</span><span class="p">:</span> <span class="n">experiment_name</span><span class="p">,</span>
            <span class="p">}]</span>
        <span class="p">})</span>
        <span class="k">if</span> <span class="n">namespace</span><span class="p">:</span>
            <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_experiment_api</span><span class="o">.</span><span class="n">list_experiment</span><span class="p">(</span>
                <span class="nb">filter</span><span class="o">=</span><span class="n">experiment_filter</span><span class="p">,</span>
                <span class="n">resource_reference_key_type</span><span class="o">=</span><span class="n">kfp_server_api</span><span class="o">.</span><span class="n">ApiResourceType</span>
                <span class="o">.</span><span class="n">NAMESPACE</span><span class="p">,</span>
                <span class="n">resource_reference_key_id</span><span class="o">=</span><span class="n">namespace</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_experiment_api</span><span class="o">.</span><span class="n">list_experiment</span><span class="p">(</span>
                <span class="nb">filter</span><span class="o">=</span><span class="n">experiment_filter</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">result</span><span class="o">.</span><span class="n">experiments</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s1">&#39;No experiment is found with name </span><span class="si">{</span><span class="n">experiment_name</span><span class="si">}</span><span class="s1">.&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">experiments</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s1">&#39;Multiple experiments is found with name </span><span class="si">{</span><span class="n">experiment_name</span><span class="si">}</span><span class="s1">.&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">result</span><span class="o">.</span><span class="n">experiments</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span></div>

<div class="viewcode-block" id="Client.archive_experiment"><a class="viewcode-back" href="../../../source/client.html#kfp.client.Client.archive_experiment">[docs]</a>    <span class="k">def</span> <span class="nf">archive_experiment</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">experiment_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Archives an experiment.</span>

<span class="sd">        Args:</span>
<span class="sd">            experiment_id: id of the experiment.</span>

<span class="sd">        Returns:</span>
<span class="sd">            dict: Empty dictionary.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_experiment_api</span><span class="o">.</span><span class="n">archive_experiment</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="n">experiment_id</span><span class="p">)</span></div>

<div class="viewcode-block" id="Client.unarchive_experiment"><a class="viewcode-back" href="../../../source/client.html#kfp.client.Client.unarchive_experiment">[docs]</a>    <span class="k">def</span> <span class="nf">unarchive_experiment</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">experiment_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Unarchives an experiment.</span>

<span class="sd">        Args:</span>
<span class="sd">            experiment_id: id of the experiment.</span>

<span class="sd">        Returns:</span>
<span class="sd">            dict: Empty dictionary.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_experiment_api</span><span class="o">.</span><span class="n">unarchive_experiment</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="n">experiment_id</span><span class="p">)</span></div>

<div class="viewcode-block" id="Client.delete_experiment"><a class="viewcode-back" href="../../../source/client.html#kfp.client.Client.delete_experiment">[docs]</a>    <span class="k">def</span> <span class="nf">delete_experiment</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">experiment_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Delete experiment.</span>

<span class="sd">        Args:</span>
<span class="sd">            experiment_id: id of the experiment.</span>

<span class="sd">        Returns:</span>
<span class="sd">            dict: Empty dictionary.</span>

<span class="sd">        Raises:</span>
<span class="sd">            kfp_server_api.ApiException: If experiment is not found.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_experiment_api</span><span class="o">.</span><span class="n">delete_experiment</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="n">experiment_id</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="nf">_extract_pipeline_yaml</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">package_file</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>

        <span class="k">def</span> <span class="nf">_choose_pipeline_file</span><span class="p">(</span><span class="n">file_list</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
            <span class="n">pipeline_files</span> <span class="o">=</span> <span class="p">[</span>
                <span class="n">file</span> <span class="k">for</span> <span class="n">file</span> <span class="ow">in</span> <span class="n">file_list</span> <span class="k">if</span> <span class="n">file</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s1">&#39;.yaml&#39;</span><span class="p">)</span>
            <span class="p">]</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">pipeline_files</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                    <span class="s1">&#39;Invalid package. Missing pipeline yaml file in the package.&#39;</span>
                <span class="p">)</span>

            <span class="k">if</span> <span class="s1">&#39;pipeline.yaml&#39;</span> <span class="ow">in</span> <span class="n">pipeline_files</span><span class="p">:</span>
                <span class="k">return</span> <span class="s1">&#39;pipeline.yaml&#39;</span>
            <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">pipeline_files</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">pipeline_files</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                    <span class="s1">&#39;Invalid package. There is no pipeline.json file or there &#39;</span>
                    <span class="s1">&#39;are multiple yaml files.&#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">package_file</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s1">&#39;.tar.gz&#39;</span><span class="p">)</span> <span class="ow">or</span> <span class="n">package_file</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s1">&#39;.tgz&#39;</span><span class="p">):</span>
            <span class="k">with</span> <span class="n">tarfile</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">package_file</span><span class="p">,</span> <span class="s1">&#39;r:gz&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">tar</span><span class="p">:</span>
                <span class="n">file_names</span> <span class="o">=</span> <span class="p">[</span><span class="n">member</span><span class="o">.</span><span class="n">name</span> <span class="k">for</span> <span class="n">member</span> <span class="ow">in</span> <span class="n">tar</span> <span class="k">if</span> <span class="n">member</span><span class="o">.</span><span class="n">isfile</span><span class="p">()]</span>
                <span class="n">pipeline_file</span> <span class="o">=</span> <span class="n">_choose_pipeline_file</span><span class="p">(</span><span class="n">file_names</span><span class="p">)</span>
                <span class="k">with</span> <span class="n">tar</span><span class="o">.</span><span class="n">extractfile</span><span class="p">(</span>
                        <span class="n">tar</span><span class="o">.</span><span class="n">getmember</span><span class="p">(</span><span class="n">pipeline_file</span><span class="p">))</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>  <span class="c1"># type: ignore</span>
                    <span class="k">return</span> <span class="n">yaml</span><span class="o">.</span><span class="n">safe_load</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">package_file</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s1">&#39;.zip&#39;</span><span class="p">):</span>
            <span class="k">with</span> <span class="n">zipfile</span><span class="o">.</span><span class="n">ZipFile</span><span class="p">(</span><span class="n">package_file</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="nb">zip</span><span class="p">:</span>
                <span class="n">pipeline_file</span> <span class="o">=</span> <span class="n">_choose_pipeline_file</span><span class="p">(</span><span class="nb">zip</span><span class="o">.</span><span class="n">namelist</span><span class="p">())</span>
                <span class="k">with</span> <span class="nb">zip</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">pipeline_file</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">yaml</span><span class="o">.</span><span class="n">safe_load</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">package_file</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s1">&#39;.yaml&#39;</span><span class="p">)</span> <span class="ow">or</span> <span class="n">package_file</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s1">&#39;.yml&#39;</span><span class="p">):</span>
            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">package_file</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">yaml</span><span class="o">.</span><span class="n">safe_load</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s1">&#39;The package_file </span><span class="si">{</span><span class="n">package_file</span><span class="si">}</span><span class="s1"> should end with one of the &#39;</span>
                <span class="s1">&#39;following formats: [.tar.gz, .tgz, .zip, .yaml, .yml].&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_override_caching_options</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pipeline_obj</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span>
                                  <span class="n">enable_caching</span><span class="p">:</span> <span class="nb">bool</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Overrides caching options.</span>

<span class="sd">        Args:</span>
<span class="sd">            pipeline_obj (dict): Dict object parsed from the yaml file.</span>
<span class="sd">            enable_caching (bool): Overrides options, one of &#39;True&#39;, &#39;False&#39;.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">task</span> <span class="ow">in</span> <span class="n">pipeline_obj</span><span class="p">[</span><span class="s1">&#39;root&#39;</span><span class="p">][</span><span class="s1">&#39;dag&#39;</span><span class="p">][</span><span class="s1">&#39;tasks&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="s1">&#39;cachingOptions&#39;</span> <span class="ow">in</span> <span class="n">task</span><span class="p">:</span>
                <span class="n">task</span><span class="p">[</span><span class="s1">&#39;cachingOptions&#39;</span><span class="p">][</span><span class="s1">&#39;enableCache&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">enable_caching</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">task</span><span class="p">[</span><span class="s1">&#39;cachingOptions&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;enableCache&#39;</span><span class="p">:</span> <span class="n">enable_caching</span><span class="p">}</span>

<div class="viewcode-block" id="Client.list_pipelines"><a class="viewcode-back" href="../../../source/client.html#kfp.client.Client.list_pipelines">[docs]</a>    <span class="k">def</span> <span class="nf">list_pipelines</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">page_token</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
        <span class="n">page_size</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">10</span><span class="p">,</span>
        <span class="n">sort_by</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
        <span class="nb">filter</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">kfp_server_api</span><span class="o">.</span><span class="n">ApiListPipelinesResponse</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Lists pipelines.</span>

<span class="sd">        Args:</span>
<span class="sd">            page_token: Token for starting of the page.</span>
<span class="sd">            page_size: Size of the page.</span>
<span class="sd">            sort_by: one of &#39;field_name&#39;, &#39;field_name desc&#39;. For example,</span>
<span class="sd">                &#39;name desc&#39;.</span>
<span class="sd">            filter: A url-encoded, JSON-serialized Filter protocol buffer</span>
<span class="sd">                (see [filter.proto](https://github.com/kubeflow/pipelines/blob/master/backend/api/filter.proto)).</span>

<span class="sd">                An example filter string would be:</span>

<span class="sd">                    # For the list of filter operations please see:</span>
<span class="sd">                    # https://github.com/kubeflow/pipelines/blob/master/sdk/python/kfp/_client.py#L40</span>
<span class="sd">                    json.dumps({</span>
<span class="sd">                        &quot;predicates&quot;: [{</span>
<span class="sd">                            &quot;op&quot;: _FILTER_OPERATIONS[&quot;EQUALS&quot;],</span>
<span class="sd">                            &quot;key&quot;: &quot;name&quot;,</span>
<span class="sd">                            &quot;stringValue&quot;: &quot;my-name&quot;,</span>
<span class="sd">                        }]</span>
<span class="sd">                    })</span>

<span class="sd">        Returns:</span>
<span class="sd">            kfp_server_api.ApiListPipelinesResponse: ApiListPipelinesResponse object.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pipelines_api</span><span class="o">.</span><span class="n">list_pipelines</span><span class="p">(</span>
            <span class="n">page_token</span><span class="o">=</span><span class="n">page_token</span><span class="p">,</span>
            <span class="n">page_size</span><span class="o">=</span><span class="n">page_size</span><span class="p">,</span>
            <span class="n">sort_by</span><span class="o">=</span><span class="n">sort_by</span><span class="p">,</span>
            <span class="nb">filter</span><span class="o">=</span><span class="nb">filter</span><span class="p">)</span></div>

    <span class="c1"># TODO: provide default namespace, similar to kubectl default namespaces.</span>
<div class="viewcode-block" id="Client.run_pipeline"><a class="viewcode-back" href="../../../source/client.html#kfp.client.Client.run_pipeline">[docs]</a>    <span class="k">def</span> <span class="nf">run_pipeline</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">experiment_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">job_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">pipeline_package_path</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">params</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">pipeline_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">version_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">pipeline_root</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">enable_caching</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">service_account</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">kfp_server_api</span><span class="o">.</span><span class="n">ApiRun</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Runs a specified pipeline.</span>

<span class="sd">        Args:</span>
<span class="sd">            experiment_id: The id of an experiment.</span>
<span class="sd">            job_name: Name of the job.</span>
<span class="sd">            pipeline_package_path: Local path of the pipeline package (the</span>
<span class="sd">                filename should end with one of the following .tar.gz, .tgz,</span>
<span class="sd">                .zip, .json).</span>
<span class="sd">            params: A dictionary with key (string) as param name and value</span>
<span class="sd">                (string) as as param value.</span>
<span class="sd">            pipeline_id: The id of a pipeline.</span>
<span class="sd">            version_id: The id of a pipeline version.</span>
<span class="sd">                If both pipeline_id and version_id are specified, version_id</span>
<span class="sd">                will take precendence.</span>
<span class="sd">                If only pipeline_id is specified, the default version of this</span>
<span class="sd">                pipeline is used to create the run.</span>
<span class="sd">            pipeline_root: The root path of the pipeline outputs.</span>
<span class="sd">            enable_caching (Optional): . Whether or not to enable caching for the</span>
<span class="sd">                run. If not set, defaults to the compile time settings, which</span>
<span class="sd">                are True for all tasks by default, while users may specify</span>
<span class="sd">                different caching options for individual tasks. If set, the</span>
<span class="sd">                setting applies to all tasks in the pipeline (overrides the</span>
<span class="sd">                compile time settings).</span>
<span class="sd">            service_account (Optional): Specifies which Kubernetes service</span>
<span class="sd">                account this run uses.</span>

<span class="sd">        Returns:</span>
<span class="sd">            kfp_server_api.ApiRun: ApiRun object.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">params</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">params</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="n">job_config</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_job_config</span><span class="p">(</span>
            <span class="n">experiment_id</span><span class="o">=</span><span class="n">experiment_id</span><span class="p">,</span>
            <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">,</span>
            <span class="n">pipeline_package_path</span><span class="o">=</span><span class="n">pipeline_package_path</span><span class="p">,</span>
            <span class="n">pipeline_id</span><span class="o">=</span><span class="n">pipeline_id</span><span class="p">,</span>
            <span class="n">version_id</span><span class="o">=</span><span class="n">version_id</span><span class="p">,</span>
            <span class="n">enable_caching</span><span class="o">=</span><span class="n">enable_caching</span><span class="p">,</span>
            <span class="n">pipeline_root</span><span class="o">=</span><span class="n">pipeline_root</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">run_body</span> <span class="o">=</span> <span class="n">kfp_server_api</span><span class="o">.</span><span class="n">ApiRun</span><span class="p">(</span>
            <span class="n">pipeline_spec</span><span class="o">=</span><span class="n">job_config</span><span class="o">.</span><span class="n">spec</span><span class="p">,</span>
            <span class="n">resource_references</span><span class="o">=</span><span class="n">job_config</span><span class="o">.</span><span class="n">resource_references</span><span class="p">,</span>
            <span class="n">name</span><span class="o">=</span><span class="n">job_name</span><span class="p">,</span>
            <span class="n">service_account</span><span class="o">=</span><span class="n">service_account</span><span class="p">)</span>

        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_run_api</span><span class="o">.</span><span class="n">create_run</span><span class="p">(</span><span class="n">body</span><span class="o">=</span><span class="n">run_body</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_ipython</span><span class="p">():</span>
            <span class="kn">import</span> <span class="nn">IPython</span>
            <span class="n">html</span> <span class="o">=</span> <span class="p">(</span>
                <span class="sa">f</span><span class="s1">&#39;&lt;a href=&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_get_url_prefix</span><span class="p">()</span><span class="si">}</span><span class="s1">/#/runs/details/</span><span class="si">{</span><span class="n">response</span><span class="o">.</span><span class="n">run</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s1">&quot; target=&quot;_blank&quot; &gt;Run details&lt;/a&gt;.&#39;</span>
            <span class="p">)</span>
            <span class="n">IPython</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">display</span><span class="p">(</span><span class="n">IPython</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">HTML</span><span class="p">(</span><span class="n">html</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">response</span><span class="o">.</span><span class="n">run</span></div>

<div class="viewcode-block" id="Client.archive_run"><a class="viewcode-back" href="../../../source/client.html#kfp.client.Client.archive_run">[docs]</a>    <span class="k">def</span> <span class="nf">archive_run</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">run_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Archives a run.</span>

<span class="sd">        Args:</span>
<span class="sd">            run_id: id of the run.</span>

<span class="sd">        Returns:</span>
<span class="sd">            dict: Empty dictionary.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_run_api</span><span class="o">.</span><span class="n">archive_run</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="n">run_id</span><span class="p">)</span></div>

<div class="viewcode-block" id="Client.unarchive_run"><a class="viewcode-back" href="../../../source/client.html#kfp.client.Client.unarchive_run">[docs]</a>    <span class="k">def</span> <span class="nf">unarchive_run</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">run_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Restores an archived run.</span>

<span class="sd">        Args:</span>
<span class="sd">            run_id: id of the run.</span>

<span class="sd">        Returns:</span>
<span class="sd">            dict: Empty dictionary.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_run_api</span><span class="o">.</span><span class="n">unarchive_run</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="n">run_id</span><span class="p">)</span></div>

<div class="viewcode-block" id="Client.delete_run"><a class="viewcode-back" href="../../../source/client.html#kfp.client.Client.delete_run">[docs]</a>    <span class="k">def</span> <span class="nf">delete_run</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">run_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Deletes a run.</span>

<span class="sd">        Args:</span>
<span class="sd">            run_id: id of the run.</span>

<span class="sd">        Returns:</span>
<span class="sd">            dict: Empty dictionary.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_run_api</span><span class="o">.</span><span class="n">delete_run</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="n">run_id</span><span class="p">)</span></div>

<div class="viewcode-block" id="Client.terminate_run"><a class="viewcode-back" href="../../../source/client.html#kfp.client.Client.terminate_run">[docs]</a>    <span class="k">def</span> <span class="nf">terminate_run</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">run_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Terminates a run.</span>

<span class="sd">        Args:</span>
<span class="sd">            run_id: id of the run.</span>

<span class="sd">        Returns:</span>
<span class="sd">            dict: Empty dictionary.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_run_api</span><span class="o">.</span><span class="n">terminate_run</span><span class="p">(</span><span class="n">run_id</span><span class="o">=</span><span class="n">run_id</span><span class="p">)</span></div>

<div class="viewcode-block" id="Client.create_recurring_run"><a class="viewcode-back" href="../../../source/client.html#kfp.client.Client.create_recurring_run">[docs]</a>    <span class="k">def</span> <span class="nf">create_recurring_run</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">experiment_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">job_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">description</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">start_time</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">end_time</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">interval_second</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">cron_expression</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">max_concurrency</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
        <span class="n">no_catchup</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">params</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">pipeline_package_path</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">pipeline_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">version_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">enabled</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">pipeline_root</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">enable_caching</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">service_account</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">kfp_server_api</span><span class="o">.</span><span class="n">ApiJob</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Creates a recurring run.</span>

<span class="sd">        Args:</span>
<span class="sd">            experiment_id: The string id of an experiment.</span>
<span class="sd">            job_name: Name of the job.</span>
<span class="sd">            description (Optional): Job description.</span>
<span class="sd">            start_time: The RFC3339 time string of the time when to start the</span>
<span class="sd">                job.</span>
<span class="sd">            end_time: The RFC3339 time string of the time when to end the job.</span>
<span class="sd">            interval_second: Integer indicating the seconds between two</span>
<span class="sd">                recurring runs in for a periodic schedule.</span>
<span class="sd">            cron_expression: A cron expression representing a set of times,</span>
<span class="sd">                using 6 space-separated fields, e.g. &quot;0 0 9 ? * 2-6&quot;. See:</span>
<span class="sd">                https://pkg.go.dev/github.com/robfig/cron#hdr-CRON_Expression_Format</span>
<span class="sd">            max_concurrency: Integer indicating how many jobs can be run in</span>
<span class="sd">                parallel.</span>
<span class="sd">            no_catchup: Whether the recurring run should catch up if behind</span>
<span class="sd">                schedule. For example, if the recurring run is paused for a</span>
<span class="sd">                while and re-enabled afterwards. If no_catchup=False, the</span>
<span class="sd">                scheduler will catch up on (backfill) each missed interval.</span>
<span class="sd">                Otherwise, it only schedules the latest interval if more than</span>
<span class="sd">                one interval is ready to be scheduled. Usually, if your pipeline</span>
<span class="sd">                handles backfill internally, you should turn catchup off to</span>
<span class="sd">                avoid duplicate backfill. (default: {False})</span>
<span class="sd">            pipeline_package_path: Local path of the pipeline package (the</span>
<span class="sd">                filename should end with one of the following .tar.gz, .tgz,</span>
<span class="sd">                .zip, .json).</span>
<span class="sd">            params: A dictionary with key as param name and value as param value.</span>
<span class="sd">            pipeline_id: The id of a pipeline.</span>
<span class="sd">            version_id: The id of a pipeline version.</span>
<span class="sd">                If both pipeline_id and version_id are specified, version_id</span>
<span class="sd">                will take precedence.</span>
<span class="sd">                If only pipeline_id is specified, the default version of this</span>
<span class="sd">                pipeline is used to create the run.</span>
<span class="sd">            enabled: A bool indicating whether the recurring run is enabled or</span>
<span class="sd">                disabled.</span>
<span class="sd">            pipeline_root: The root path of the pipeline outputs.</span>
<span class="sd">            enable_caching (Optional): Whether or not to enable caching for the</span>
<span class="sd">                run. If not set, defaults to the compile time settings, which</span>
<span class="sd">                are True for all tasks by default, while users may specify</span>
<span class="sd">                different caching options for individual tasks. If set, the</span>
<span class="sd">                setting applies to all tasks in the pipeline (overrides the</span>
<span class="sd">                compile time settings).</span>
<span class="sd">            service_account (Optional): Specifies which Kubernetes service</span>
<span class="sd">                account this recurring run uses.</span>
<span class="sd">        Returns:</span>
<span class="sd">            kfp_server_api.ApiJob: ApiJob object.</span>

<span class="sd">        Raises:</span>
<span class="sd">            ValueError: If required parameters are not supplied.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">job_config</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_job_config</span><span class="p">(</span>
            <span class="n">experiment_id</span><span class="o">=</span><span class="n">experiment_id</span><span class="p">,</span>
            <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">,</span>
            <span class="n">pipeline_package_path</span><span class="o">=</span><span class="n">pipeline_package_path</span><span class="p">,</span>
            <span class="n">pipeline_id</span><span class="o">=</span><span class="n">pipeline_id</span><span class="p">,</span>
            <span class="n">version_id</span><span class="o">=</span><span class="n">version_id</span><span class="p">,</span>
            <span class="n">enable_caching</span><span class="o">=</span><span class="n">enable_caching</span><span class="p">,</span>
            <span class="n">pipeline_root</span><span class="o">=</span><span class="n">pipeline_root</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="k">if</span> <span class="nb">all</span><span class="p">([</span><span class="n">interval_second</span><span class="p">,</span> <span class="n">cron_expression</span>
               <span class="p">])</span> <span class="ow">or</span> <span class="ow">not</span> <span class="nb">any</span><span class="p">([</span><span class="n">interval_second</span><span class="p">,</span> <span class="n">cron_expression</span><span class="p">]):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="s1">&#39;Either interval_second or cron_expression is required&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">interval_second</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">trigger</span> <span class="o">=</span> <span class="n">kfp_server_api</span><span class="o">.</span><span class="n">ApiTrigger</span><span class="p">(</span>
                <span class="n">periodic_schedule</span><span class="o">=</span><span class="n">kfp_server_api</span><span class="o">.</span><span class="n">ApiPeriodicSchedule</span><span class="p">(</span>
                    <span class="n">start_time</span><span class="o">=</span><span class="n">start_time</span><span class="p">,</span>
                    <span class="n">end_time</span><span class="o">=</span><span class="n">end_time</span><span class="p">,</span>
                    <span class="n">interval_second</span><span class="o">=</span><span class="n">interval_second</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">cron_expression</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">trigger</span> <span class="o">=</span> <span class="n">kfp_server_api</span><span class="o">.</span><span class="n">ApiTrigger</span><span class="p">(</span>
                <span class="n">cron_schedule</span><span class="o">=</span><span class="n">kfp_server_api</span><span class="o">.</span><span class="n">ApiCronSchedule</span><span class="p">(</span>
                    <span class="n">start_time</span><span class="o">=</span><span class="n">start_time</span><span class="p">,</span>
                    <span class="n">end_time</span><span class="o">=</span><span class="n">end_time</span><span class="p">,</span>
                    <span class="n">cron</span><span class="o">=</span><span class="n">cron_expression</span><span class="p">))</span>

        <span class="n">job_body</span> <span class="o">=</span> <span class="n">kfp_server_api</span><span class="o">.</span><span class="n">ApiJob</span><span class="p">(</span>
            <span class="n">enabled</span><span class="o">=</span><span class="n">enabled</span><span class="p">,</span>
            <span class="n">pipeline_spec</span><span class="o">=</span><span class="n">job_config</span><span class="o">.</span><span class="n">spec</span><span class="p">,</span>
            <span class="n">resource_references</span><span class="o">=</span><span class="n">job_config</span><span class="o">.</span><span class="n">resource_references</span><span class="p">,</span>
            <span class="n">name</span><span class="o">=</span><span class="n">job_name</span><span class="p">,</span>
            <span class="n">description</span><span class="o">=</span><span class="n">description</span><span class="p">,</span>
            <span class="n">no_catchup</span><span class="o">=</span><span class="n">no_catchup</span><span class="p">,</span>
            <span class="n">trigger</span><span class="o">=</span><span class="n">trigger</span><span class="p">,</span>
            <span class="n">max_concurrency</span><span class="o">=</span><span class="n">max_concurrency</span><span class="p">,</span>
            <span class="n">service_account</span><span class="o">=</span><span class="n">service_account</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_job_api</span><span class="o">.</span><span class="n">create_job</span><span class="p">(</span><span class="n">body</span><span class="o">=</span><span class="n">job_body</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="nf">_create_job_config</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">experiment_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">params</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]],</span>
        <span class="n">pipeline_package_path</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span>
        <span class="n">pipeline_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span>
        <span class="n">version_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span>
        <span class="n">enable_caching</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">],</span>
        <span class="n">pipeline_root</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">JobConfig</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Creates a JobConfig with spec and resource_references.</span>

<span class="sd">        Args:</span>
<span class="sd">            experiment_id: The id of an experiment.</span>
<span class="sd">            pipeline_package_path: Local path of the pipeline package (the</span>
<span class="sd">                filename should end with one of the following .tar.gz, .tgz,</span>
<span class="sd">                .zip, .yaml, .yml).</span>
<span class="sd">            params: A dictionary with key as param name and value as param value.</span>
<span class="sd">            pipeline_id: The id of a pipeline.</span>
<span class="sd">            version_id: The id of a pipeline version.</span>
<span class="sd">                If both pipeline_id and version_id are specified, version_id</span>
<span class="sd">                will take precedence. If only pipeline_id is specified, the</span>
<span class="sd">                default version of this pipeline is used to create the run.</span>
<span class="sd">            enable_caching (Optional): Whether or not to enable caching for the</span>
<span class="sd">                run. If not set, defaults to the compile time settings, which</span>
<span class="sd">                are True for all tasks by default, while users may specify</span>
<span class="sd">                different caching options for individual tasks. If set, the</span>
<span class="sd">                setting applies to all tasks in the pipeline (overrides the</span>
<span class="sd">                compile time settings).</span>
<span class="sd">            pipeline_root: The root path of the pipeline outputs.</span>

<span class="sd">        Returns:</span>
<span class="sd">            JobConfig: A JobConfig object with attributes .spec and .resource_reference.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">params</span> <span class="o">=</span> <span class="n">params</span> <span class="ow">or</span> <span class="p">{}</span>
        <span class="n">pipeline_yaml_string</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="n">pipeline_package_path</span><span class="p">:</span>
            <span class="n">pipeline_obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_extract_pipeline_yaml</span><span class="p">(</span><span class="n">pipeline_package_path</span><span class="p">)</span>

            <span class="c1"># Caching option set at submission time overrides the compile time</span>
            <span class="c1"># settings.</span>
            <span class="k">if</span> <span class="n">enable_caching</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_override_caching_options</span><span class="p">(</span><span class="n">pipeline_obj</span><span class="p">,</span> <span class="n">enable_caching</span><span class="p">)</span>

            <span class="n">pipeline_yaml_string</span> <span class="o">=</span> <span class="n">yaml</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">pipeline_obj</span><span class="p">,</span> <span class="n">sort_keys</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

        <span class="n">runtime_config</span> <span class="o">=</span> <span class="n">kfp_server_api</span><span class="o">.</span><span class="n">PipelineSpecRuntimeConfig</span><span class="p">(</span>
            <span class="n">pipeline_root</span><span class="o">=</span><span class="n">pipeline_root</span><span class="p">,</span>
            <span class="n">parameters</span><span class="o">=</span><span class="n">params</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">resource_references</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">key</span> <span class="o">=</span> <span class="n">kfp_server_api</span><span class="o">.</span><span class="n">ApiResourceKey</span><span class="p">(</span>
            <span class="nb">id</span><span class="o">=</span><span class="n">experiment_id</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="n">kfp_server_api</span><span class="o">.</span><span class="n">ApiResourceType</span><span class="o">.</span><span class="n">EXPERIMENT</span><span class="p">)</span>
        <span class="n">reference</span> <span class="o">=</span> <span class="n">kfp_server_api</span><span class="o">.</span><span class="n">ApiResourceReference</span><span class="p">(</span>
            <span class="n">key</span><span class="o">=</span><span class="n">key</span><span class="p">,</span> <span class="n">relationship</span><span class="o">=</span><span class="n">kfp_server_api</span><span class="o">.</span><span class="n">ApiRelationship</span><span class="o">.</span><span class="n">OWNER</span><span class="p">)</span>
        <span class="n">resource_references</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">reference</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">version_id</span><span class="p">:</span>
            <span class="n">key</span> <span class="o">=</span> <span class="n">kfp_server_api</span><span class="o">.</span><span class="n">ApiResourceKey</span><span class="p">(</span>
                <span class="nb">id</span><span class="o">=</span><span class="n">version_id</span><span class="p">,</span>
                <span class="nb">type</span><span class="o">=</span><span class="n">kfp_server_api</span><span class="o">.</span><span class="n">ApiResourceType</span><span class="o">.</span><span class="n">PIPELINE_VERSION</span><span class="p">)</span>
            <span class="n">reference</span> <span class="o">=</span> <span class="n">kfp_server_api</span><span class="o">.</span><span class="n">ApiResourceReference</span><span class="p">(</span>
                <span class="n">key</span><span class="o">=</span><span class="n">key</span><span class="p">,</span> <span class="n">relationship</span><span class="o">=</span><span class="n">kfp_server_api</span><span class="o">.</span><span class="n">ApiRelationship</span><span class="o">.</span><span class="n">CREATOR</span><span class="p">)</span>
            <span class="n">resource_references</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">reference</span><span class="p">)</span>

        <span class="n">spec</span> <span class="o">=</span> <span class="n">kfp_server_api</span><span class="o">.</span><span class="n">ApiPipelineSpec</span><span class="p">(</span>
            <span class="n">pipeline_id</span><span class="o">=</span><span class="n">pipeline_id</span><span class="p">,</span>
            <span class="n">pipeline_manifest</span><span class="o">=</span><span class="n">pipeline_yaml_string</span><span class="p">,</span>
            <span class="n">runtime_config</span><span class="o">=</span><span class="n">runtime_config</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">JobConfig</span><span class="p">(</span><span class="n">spec</span><span class="o">=</span><span class="n">spec</span><span class="p">,</span> <span class="n">resource_references</span><span class="o">=</span><span class="n">resource_references</span><span class="p">)</span>

<div class="viewcode-block" id="Client.create_run_from_pipeline_func"><a class="viewcode-back" href="../../../source/client.html#kfp.client.Client.create_run_from_pipeline_func">[docs]</a>    <span class="k">def</span> <span class="nf">create_run_from_pipeline_func</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">pipeline_func</span><span class="p">:</span> <span class="n">Callable</span><span class="p">,</span>
        <span class="n">arguments</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">run_name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">experiment_name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">namespace</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">pipeline_root</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">enable_caching</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">service_account</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">RunPipelineResult</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Runs pipeline on KFP-enabled Kubernetes cluster.</span>

<span class="sd">        This command compiles the pipeline function, creates or gets an</span>
<span class="sd">        experiment and submits the pipeline for execution.</span>

<span class="sd">        Args:</span>
<span class="sd">            pipeline_func: A function that describes a pipeline by calling</span>
<span class="sd">                components and composing them into execution graph.</span>
<span class="sd">            arguments: Arguments to the pipeline function provided as a dict.</span>
<span class="sd">            run_name (Optional): Name of the run to be shown in the UI.</span>
<span class="sd">            experiment_name (Optional): Name of the experiment to add the run to.</span>
<span class="sd">            namespace: Kubernetes namespace where the pipeline runs are created.</span>
<span class="sd">                For single user deployment, leave it as None;</span>
<span class="sd">                For multi user, input a namespace where the user is authorized</span>
<span class="sd">            pipeline_root: The root path of the pipeline outputs.</span>
<span class="sd">            enable_caching (Optional): Whether or not to enable caching for the</span>
<span class="sd">                run. If not set, defaults to the compile time settings, which</span>
<span class="sd">                are True for all tasks by default, while users may specify</span>
<span class="sd">                different caching options for individual tasks. If set, the</span>
<span class="sd">                setting applies to all tasks in the pipeline (overrides the</span>
<span class="sd">                compile time settings).</span>
<span class="sd">            service_account (Optional): Specifies which Kubernetes service</span>
<span class="sd">                account this run uses.</span>

<span class="sd">        Returns:</span>
<span class="sd">            RunPipelineResult: RunPipelineResult object containing information about the pipeline run.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1">#TODO: Check arguments against the pipeline function</span>
        <span class="n">pipeline_name</span> <span class="o">=</span> <span class="n">pipeline_func</span><span class="o">.</span><span class="vm">__name__</span>
        <span class="n">run_name</span> <span class="o">=</span> <span class="n">run_name</span> <span class="ow">or</span> <span class="n">pipeline_name</span> <span class="o">+</span> <span class="s1">&#39; &#39;</span> <span class="o">+</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">(</span>
        <span class="p">)</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s1">&#39;%Y-%m-</span><span class="si">%d</span><span class="s1"> %H-%M-%S&#39;</span><span class="p">)</span>

        <span class="k">with</span> <span class="n">tempfile</span><span class="o">.</span><span class="n">TemporaryDirectory</span><span class="p">()</span> <span class="k">as</span> <span class="n">tmpdir</span><span class="p">:</span>
            <span class="n">pipeline_package_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">tmpdir</span><span class="p">,</span> <span class="s1">&#39;pipeline.yaml&#39;</span><span class="p">)</span>
            <span class="n">compiler</span><span class="o">.</span><span class="n">Compiler</span><span class="p">()</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span>
                <span class="n">pipeline_func</span><span class="o">=</span><span class="n">pipeline_func</span><span class="p">,</span>
                <span class="n">package_path</span><span class="o">=</span><span class="n">pipeline_package_path</span><span class="p">,</span>
            <span class="p">)</span>

            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_run_from_pipeline_package</span><span class="p">(</span>
                <span class="n">pipeline_file</span><span class="o">=</span><span class="n">pipeline_package_path</span><span class="p">,</span>
                <span class="n">arguments</span><span class="o">=</span><span class="n">arguments</span><span class="p">,</span>
                <span class="n">run_name</span><span class="o">=</span><span class="n">run_name</span><span class="p">,</span>
                <span class="n">experiment_name</span><span class="o">=</span><span class="n">experiment_name</span><span class="p">,</span>
                <span class="n">namespace</span><span class="o">=</span><span class="n">namespace</span><span class="p">,</span>
                <span class="n">pipeline_root</span><span class="o">=</span><span class="n">pipeline_root</span><span class="p">,</span>
                <span class="n">enable_caching</span><span class="o">=</span><span class="n">enable_caching</span><span class="p">,</span>
                <span class="n">service_account</span><span class="o">=</span><span class="n">service_account</span><span class="p">,</span>
            <span class="p">)</span></div>

<div class="viewcode-block" id="Client.create_run_from_pipeline_package"><a class="viewcode-back" href="../../../source/client.html#kfp.client.Client.create_run_from_pipeline_package">[docs]</a>    <span class="k">def</span> <span class="nf">create_run_from_pipeline_package</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">pipeline_file</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">arguments</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">run_name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">experiment_name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">namespace</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">pipeline_root</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">enable_caching</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">service_account</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">RunPipelineResult</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Runs pipeline on KFP-enabled Kubernetes cluster.</span>

<span class="sd">        This command takes a local pipeline package, creates or gets an</span>
<span class="sd">        experiment and submits the pipeline for execution.</span>

<span class="sd">        Args:</span>
<span class="sd">            pipeline_file: A compiled pipeline package file.</span>
<span class="sd">            arguments: Arguments to the pipeline function provided as a dict.</span>
<span class="sd">            run_name (Optional):  Name of the run to be shown in the UI.</span>
<span class="sd">            experiment_name (Optional): Name of the experiment to add the run to.</span>
<span class="sd">            namespace (Optional): Kubernetes namespace where the pipeline runs are created.</span>
<span class="sd">              For single user deployment, leave it as None;</span>
<span class="sd">              For multi user, input a namespace where the user is authorized</span>
<span class="sd">            pipeline_root (Optional): The root path of the pipeline outputs.</span>
<span class="sd">            enable_caching (Optional): Whether or not to enable caching for the</span>
<span class="sd">                run. If not set, defaults to the compile time settings, which</span>
<span class="sd">                are True for all tasks by default, while users may specify</span>
<span class="sd">                different caching options for individual tasks. If set, the</span>
<span class="sd">                setting applies to all tasks in the pipeline (overrides the</span>
<span class="sd">                compile time settings).</span>
<span class="sd">            service_account (Optional): Specifies which Kubernetes service</span>
<span class="sd">                account this run uses.</span>

<span class="sd">        Returns:</span>
<span class="sd">            RunPipelineResult: RunPipelineResult object containing information about the pipeline run.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="c1">#TODO: Check arguments against the pipeline function</span>
        <span class="n">pipeline_name</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">pipeline_file</span><span class="p">)</span>
        <span class="n">experiment_name</span> <span class="o">=</span> <span class="n">experiment_name</span> <span class="ow">or</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
            <span class="n">KF_PIPELINES_DEFAULT_EXPERIMENT_NAME</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="n">overridden_experiment_name</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
            <span class="n">KF_PIPELINES_OVERRIDE_EXPERIMENT_NAME</span><span class="p">,</span> <span class="n">experiment_name</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">overridden_experiment_name</span> <span class="o">!=</span> <span class="n">experiment_name</span><span class="p">:</span>
            <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
                <span class="sa">f</span><span class="s1">&#39;Changing experiment name from &quot;</span><span class="si">{</span><span class="n">experiment_name</span><span class="si">}</span><span class="s1">&quot; to &quot;</span><span class="si">{</span><span class="n">overridden_experiment_name</span><span class="si">}</span><span class="s1">&quot;.&#39;</span>
            <span class="p">)</span>
        <span class="n">experiment_name</span> <span class="o">=</span> <span class="n">overridden_experiment_name</span> <span class="ow">or</span> <span class="s1">&#39;Default&#39;</span>
        <span class="n">run_name</span> <span class="o">=</span> <span class="n">run_name</span> <span class="ow">or</span> <span class="p">(</span>
            <span class="n">pipeline_name</span> <span class="o">+</span> <span class="s1">&#39; &#39;</span> <span class="o">+</span>
            <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s1">&#39;%Y-%m-</span><span class="si">%d</span><span class="s1"> %H-%M-%S&#39;</span><span class="p">))</span>
        <span class="n">experiment</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_experiment</span><span class="p">(</span>
            <span class="n">name</span><span class="o">=</span><span class="n">experiment_name</span><span class="p">,</span> <span class="n">namespace</span><span class="o">=</span><span class="n">namespace</span><span class="p">)</span>
        <span class="n">run_info</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">run_pipeline</span><span class="p">(</span>
            <span class="n">experiment_id</span><span class="o">=</span><span class="n">experiment</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
            <span class="n">job_name</span><span class="o">=</span><span class="n">run_name</span><span class="p">,</span>
            <span class="n">pipeline_package_path</span><span class="o">=</span><span class="n">pipeline_file</span><span class="p">,</span>
            <span class="n">params</span><span class="o">=</span><span class="n">arguments</span><span class="p">,</span>
            <span class="n">pipeline_root</span><span class="o">=</span><span class="n">pipeline_root</span><span class="p">,</span>
            <span class="n">enable_caching</span><span class="o">=</span><span class="n">enable_caching</span><span class="p">,</span>
            <span class="n">service_account</span><span class="o">=</span><span class="n">service_account</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">RunPipelineResult</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">run_info</span><span class="p">)</span></div>

<div class="viewcode-block" id="Client.delete_job"><a class="viewcode-back" href="../../../source/client.html#kfp.client.Client.delete_job">[docs]</a>    <span class="k">def</span> <span class="nf">delete_job</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">job_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Deletes a job.</span>

<span class="sd">        Args:</span>
<span class="sd">            job_id: id of the job.</span>

<span class="sd">        Returns:</span>
<span class="sd">            dict: Empty dictionary.</span>

<span class="sd">        Raises:</span>
<span class="sd">            kfp_server_api.ApiException: If the job is not found.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_job_api</span><span class="o">.</span><span class="n">delete_job</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="n">job_id</span><span class="p">)</span></div>

<div class="viewcode-block" id="Client.disable_job"><a class="viewcode-back" href="../../../source/client.html#kfp.client.Client.disable_job">[docs]</a>    <span class="k">def</span> <span class="nf">disable_job</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">job_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Disables a job.</span>

<span class="sd">        Args:</span>
<span class="sd">            job_id: id of the job.</span>

<span class="sd">        Returns:</span>
<span class="sd">            dict: Empty dictionary.</span>

<span class="sd">        Raises:</span>
<span class="sd">            kfp_server_api.ApiException: If the job is not found.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_job_api</span><span class="o">.</span><span class="n">disable_job</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="n">job_id</span><span class="p">)</span></div>

<div class="viewcode-block" id="Client.enable_job"><a class="viewcode-back" href="../../../source/client.html#kfp.client.Client.enable_job">[docs]</a>    <span class="k">def</span> <span class="nf">enable_job</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">job_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Enables a job.</span>

<span class="sd">        Args:</span>
<span class="sd">            job_id: id of the job.</span>

<span class="sd">        Returns:</span>
<span class="sd">            dict: Empty dictionary.</span>

<span class="sd">        Raises:</span>
<span class="sd">            kfp_server_api.ApiException: If the job is not found.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_job_api</span><span class="o">.</span><span class="n">enable_job</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="n">job_id</span><span class="p">)</span></div>

<div class="viewcode-block" id="Client.list_runs"><a class="viewcode-back" href="../../../source/client.html#kfp.client.Client.list_runs">[docs]</a>    <span class="k">def</span> <span class="nf">list_runs</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span>
            <span class="n">page_token</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
            <span class="n">page_size</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">10</span><span class="p">,</span>
            <span class="n">sort_by</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
            <span class="n">experiment_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
            <span class="n">namespace</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
            <span class="nb">filter</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">kfp_server_api</span><span class="o">.</span><span class="n">ApiListRunsResponse</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;List runs, optionally can be filtered by experiment or namespace.</span>

<span class="sd">        Args:</span>
<span class="sd">            page_token: Token for starting of the page.</span>
<span class="sd">            page_size: Size of the page.</span>
<span class="sd">            sort_by: One of &#39;field_name&#39;, &#39;field_name desc&#39;. For example,</span>
<span class="sd">                &#39;name desc&#39;.</span>
<span class="sd">            experiment_id: Experiment id to filter upon</span>
<span class="sd">            namespace: Kubernetes namespace to filter upon.</span>
<span class="sd">                For single user deployment, leave it as None;</span>
<span class="sd">                For multi user, input a namespace where the user is authorized.</span>
<span class="sd">            filter: A url-encoded, JSON-serialized Filter protocol buffer</span>
<span class="sd">                (see [filter.proto](https://github.com/kubeflow/pipelines/blob/master/backend/api/filter.proto)).</span>

<span class="sd">                An example filter string would be:</span>

<span class="sd">                    # For the list of filter operations please see:</span>
<span class="sd">                    # https://github.com/kubeflow/pipelines/blob/master/sdk/python/kfp/_client.py#L40</span>
<span class="sd">                    json.dumps({</span>
<span class="sd">                        &quot;predicates&quot;: [{</span>
<span class="sd">                            &quot;op&quot;: _FILTER_OPERATIONS[&quot;EQUALS&quot;],</span>
<span class="sd">                            &quot;key&quot;: &quot;name&quot;,</span>
<span class="sd">                            &quot;stringValue&quot;: &quot;my-name&quot;,</span>
<span class="sd">                        }]</span>
<span class="sd">                    })</span>

<span class="sd">          Returns:</span>
<span class="sd">              kfp_server_api.ApiListRunsResponse: ApiListRunsResponse object.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">namespace</span> <span class="o">=</span> <span class="n">namespace</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_user_namespace</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">experiment_id</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_run_api</span><span class="o">.</span><span class="n">list_runs</span><span class="p">(</span>
                <span class="n">page_token</span><span class="o">=</span><span class="n">page_token</span><span class="p">,</span>
                <span class="n">page_size</span><span class="o">=</span><span class="n">page_size</span><span class="p">,</span>
                <span class="n">sort_by</span><span class="o">=</span><span class="n">sort_by</span><span class="p">,</span>
                <span class="n">resource_reference_key_type</span><span class="o">=</span><span class="n">kfp_server_api</span><span class="o">.</span><span class="n">ApiResourceType</span>
                <span class="o">.</span><span class="n">EXPERIMENT</span><span class="p">,</span>
                <span class="n">resource_reference_key_id</span><span class="o">=</span><span class="n">experiment_id</span><span class="p">,</span>
                <span class="nb">filter</span><span class="o">=</span><span class="nb">filter</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">namespace</span><span class="p">:</span>
            <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_run_api</span><span class="o">.</span><span class="n">list_runs</span><span class="p">(</span>
                <span class="n">page_token</span><span class="o">=</span><span class="n">page_token</span><span class="p">,</span>
                <span class="n">page_size</span><span class="o">=</span><span class="n">page_size</span><span class="p">,</span>
                <span class="n">sort_by</span><span class="o">=</span><span class="n">sort_by</span><span class="p">,</span>
                <span class="n">resource_reference_key_type</span><span class="o">=</span><span class="n">kfp_server_api</span><span class="o">.</span><span class="n">ApiResourceType</span>
                <span class="o">.</span><span class="n">NAMESPACE</span><span class="p">,</span>
                <span class="n">resource_reference_key_id</span><span class="o">=</span><span class="n">namespace</span><span class="p">,</span>
                <span class="nb">filter</span><span class="o">=</span><span class="nb">filter</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_run_api</span><span class="o">.</span><span class="n">list_runs</span><span class="p">(</span>
                <span class="n">page_token</span><span class="o">=</span><span class="n">page_token</span><span class="p">,</span>
                <span class="n">page_size</span><span class="o">=</span><span class="n">page_size</span><span class="p">,</span>
                <span class="n">sort_by</span><span class="o">=</span><span class="n">sort_by</span><span class="p">,</span>
                <span class="nb">filter</span><span class="o">=</span><span class="nb">filter</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">response</span></div>

<div class="viewcode-block" id="Client.list_recurring_runs"><a class="viewcode-back" href="../../../source/client.html#kfp.client.Client.list_recurring_runs">[docs]</a>    <span class="k">def</span> <span class="nf">list_recurring_runs</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span>
            <span class="n">page_token</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
            <span class="n">page_size</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">10</span><span class="p">,</span>
            <span class="n">sort_by</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
            <span class="n">experiment_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
            <span class="nb">filter</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">kfp_server_api</span><span class="o">.</span><span class="n">ApiListJobsResponse</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Lists recurring runs.</span>

<span class="sd">        Args:</span>
<span class="sd">            page_token: Token for starting of the page.</span>
<span class="sd">            page_size: Size of the page.</span>
<span class="sd">            sort_by: One of &#39;field_name&#39;, &#39;field_name desc&#39;. For example,</span>
<span class="sd">                &#39;name desc&#39;.</span>
<span class="sd">            experiment_id: Experiment id to filter upon.</span>
<span class="sd">            filter: A url-encoded, JSON-serialized Filter protocol buffer</span>
<span class="sd">                (see [filter.proto](https://github.com/kubeflow/pipelines/blob/master/backend/api/filter.proto)).</span>

<span class="sd">                An example filter string would be:</span>

<span class="sd">                    # For the list of filter operations please see:</span>
<span class="sd">                    # https://github.com/kubeflow/pipelines/blob/master/sdk/python/kfp/_client.py#L40</span>
<span class="sd">                    json.dumps({</span>
<span class="sd">                        &quot;predicates&quot;: [{</span>
<span class="sd">                            &quot;op&quot;: _FILTER_OPERATIONS[&quot;EQUALS&quot;],</span>
<span class="sd">                            &quot;key&quot;: &quot;name&quot;,</span>
<span class="sd">                            &quot;stringValue&quot;: &quot;my-name&quot;,</span>
<span class="sd">                        }]</span>
<span class="sd">                    })</span>

<span class="sd">        Returns:</span>
<span class="sd">            kfp_server_api.ApiListJobsResponse: ApiListJobsResponse object.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">experiment_id</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_job_api</span><span class="o">.</span><span class="n">list_jobs</span><span class="p">(</span>
                <span class="n">page_token</span><span class="o">=</span><span class="n">page_token</span><span class="p">,</span>
                <span class="n">page_size</span><span class="o">=</span><span class="n">page_size</span><span class="p">,</span>
                <span class="n">sort_by</span><span class="o">=</span><span class="n">sort_by</span><span class="p">,</span>
                <span class="n">resource_reference_key_type</span><span class="o">=</span><span class="n">kfp_server_api</span><span class="o">.</span><span class="n">ApiResourceType</span>
                <span class="o">.</span><span class="n">EXPERIMENT</span><span class="p">,</span>
                <span class="n">resource_reference_key_id</span><span class="o">=</span><span class="n">experiment_id</span><span class="p">,</span>
                <span class="nb">filter</span><span class="o">=</span><span class="nb">filter</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_job_api</span><span class="o">.</span><span class="n">list_jobs</span><span class="p">(</span>
                <span class="n">page_token</span><span class="o">=</span><span class="n">page_token</span><span class="p">,</span>
                <span class="n">page_size</span><span class="o">=</span><span class="n">page_size</span><span class="p">,</span>
                <span class="n">sort_by</span><span class="o">=</span><span class="n">sort_by</span><span class="p">,</span>
                <span class="nb">filter</span><span class="o">=</span><span class="nb">filter</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">response</span></div>

<div class="viewcode-block" id="Client.get_recurring_run"><a class="viewcode-back" href="../../../source/client.html#kfp.client.Client.get_recurring_run">[docs]</a>    <span class="k">def</span> <span class="nf">get_recurring_run</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">job_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">kfp_server_api</span><span class="o">.</span><span class="n">ApiJob</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Gets recurring_run details.</span>

<span class="sd">        Args:</span>
<span class="sd">            job_id: id of the recurring_run.</span>

<span class="sd">        Returns:</span>
<span class="sd">            kfp_server_api.ApiJob: ApiJob object.</span>

<span class="sd">        Raises:</span>
<span class="sd">            kfp_server_api.ApiException: If recurring_run is not found.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_job_api</span><span class="o">.</span><span class="n">get_job</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="n">job_id</span><span class="p">)</span></div>

<div class="viewcode-block" id="Client.get_run"><a class="viewcode-back" href="../../../source/client.html#kfp.client.Client.get_run">[docs]</a>    <span class="k">def</span> <span class="nf">get_run</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">run_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">kfp_server_api</span><span class="o">.</span><span class="n">ApiRun</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Gets run details.</span>

<span class="sd">        Args:</span>
<span class="sd">            run_id: id of the run.</span>

<span class="sd">        Returns:</span>
<span class="sd">            kfp_server_api.ApiRun: ApiRun object.</span>

<span class="sd">        Raises:</span>
<span class="sd">            kfp_server_api.ApiException: If run is not found.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_run_api</span><span class="o">.</span><span class="n">get_run</span><span class="p">(</span><span class="n">run_id</span><span class="o">=</span><span class="n">run_id</span><span class="p">)</span></div>

<div class="viewcode-block" id="Client.wait_for_run_completion"><a class="viewcode-back" href="../../../source/client.html#kfp.client.Client.wait_for_run_completion">[docs]</a>    <span class="k">def</span> <span class="nf">wait_for_run_completion</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">run_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
                                <span class="n">timeout</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">kfp_server_api</span><span class="o">.</span><span class="n">ApiRun</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Waits for a run to complete.</span>

<span class="sd">        Args:</span>
<span class="sd">            run_id: Run id, returned from run_pipeline.</span>
<span class="sd">            timeout: Timeout in seconds.</span>

<span class="sd">        Returns:</span>
<span class="sd">            kfp_server_api.ApiRun: ApiRun object.</span>

<span class="sd">        Raises:</span>
<span class="sd">            TimeoutError: if the pipeline run failed to finish before the</span>
<span class="sd">                specified timeout.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">status</span> <span class="o">=</span> <span class="s1">&#39;Running:&#39;</span>
        <span class="n">start_time</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">timeout</span><span class="p">,</span> <span class="n">datetime</span><span class="o">.</span><span class="n">timedelta</span><span class="p">):</span>
            <span class="n">timeout</span> <span class="o">=</span> <span class="n">timeout</span><span class="o">.</span><span class="n">total_seconds</span><span class="p">()</span>
        <span class="n">is_valid_token</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">while</span> <span class="p">(</span><span class="n">status</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">status</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
               <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;succeeded&#39;</span><span class="p">,</span> <span class="s1">&#39;failed&#39;</span><span class="p">,</span> <span class="s1">&#39;skipped&#39;</span><span class="p">,</span> <span class="s1">&#39;error&#39;</span><span class="p">]):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">get_run_response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_run_api</span><span class="o">.</span><span class="n">get_run</span><span class="p">(</span><span class="n">run_id</span><span class="o">=</span><span class="n">run_id</span><span class="p">)</span>
                <span class="n">is_valid_token</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="k">except</span> <span class="n">kfp_server_api</span><span class="o">.</span><span class="n">ApiException</span> <span class="k">as</span> <span class="n">api_ex</span><span class="p">:</span>
                <span class="c1"># if the token is valid but receiving 401 Unauthorized error</span>
                <span class="c1"># then refresh the token</span>
                <span class="k">if</span> <span class="n">is_valid_token</span> <span class="ow">and</span> <span class="n">api_ex</span><span class="o">.</span><span class="n">status</span> <span class="o">==</span> <span class="mi">401</span><span class="p">:</span>
                    <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;Access token has expired !!! Refreshing ...&#39;</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_refresh_api_client_token</span><span class="p">()</span>
                    <span class="k">continue</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="n">api_ex</span>
            <span class="n">status</span> <span class="o">=</span> <span class="n">get_run_response</span><span class="o">.</span><span class="n">run</span><span class="o">.</span><span class="n">status</span>
            <span class="n">elapsed_time</span> <span class="o">=</span> <span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span> <span class="o">-</span>
                            <span class="n">start_time</span><span class="p">)</span><span class="o">.</span><span class="n">total_seconds</span><span class="p">()</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;Waiting for the job to complete...&#39;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">elapsed_time</span> <span class="o">&gt;</span> <span class="n">timeout</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">TimeoutError</span><span class="p">(</span><span class="s1">&#39;Run timeout&#39;</span><span class="p">)</span>
            <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">get_run_response</span></div>

    <span class="k">def</span> <span class="nf">_get_workflow_json</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">run_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Gets the workflow json.</span>

<span class="sd">        Args:</span>
<span class="sd">            run_id: run id, returned from run_pipeline.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Workflow JSON.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">get_run_response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_run_api</span><span class="o">.</span><span class="n">get_run</span><span class="p">(</span><span class="n">run_id</span><span class="o">=</span><span class="n">run_id</span><span class="p">)</span>
        <span class="n">workflow</span> <span class="o">=</span> <span class="n">get_run_response</span><span class="o">.</span><span class="n">pipeline_runtime</span><span class="o">.</span><span class="n">workflow_manifest</span>
        <span class="n">workflow_json</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">workflow</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">workflow_json</span>

<div class="viewcode-block" id="Client.upload_pipeline"><a class="viewcode-back" href="../../../source/client.html#kfp.client.Client.upload_pipeline">[docs]</a>    <span class="k">def</span> <span class="nf">upload_pipeline</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">pipeline_package_path</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">pipeline_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">description</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">kfp_server_api</span><span class="o">.</span><span class="n">ApiPipeline</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Uploads the pipeline to the Kubeflow Pipelines cluster.</span>

<span class="sd">        Args:</span>
<span class="sd">            pipeline_package_path: Local path to the pipeline package.</span>
<span class="sd">            pipeline_name (Optional): Name of the pipeline to be shown in the UI.</span>
<span class="sd">            description (Optional): Description of the pipeline to be shown in</span>
<span class="sd">                the UI.</span>

<span class="sd">        Returns:</span>
<span class="sd">            kfp_server_api.ApiPipeline: ApiPipeline object.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">pipeline_name</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">pipeline_name</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span>
                <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="s1">&#39;something/file.txt&#39;</span><span class="p">))[</span><span class="mi">0</span><span class="p">]</span>

        <span class="n">validate_pipeline_resource_name</span><span class="p">(</span><span class="n">pipeline_name</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_upload_api</span><span class="o">.</span><span class="n">upload_pipeline</span><span class="p">(</span>
            <span class="n">pipeline_package_path</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="n">pipeline_name</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="n">description</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_ipython</span><span class="p">():</span>
            <span class="kn">import</span> <span class="nn">IPython</span>
            <span class="n">html</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;&lt;a href=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_get_url_prefix</span><span class="p">()</span><span class="si">}</span><span class="s1">/#/pipelines/details/</span><span class="si">{</span><span class="n">response</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s1">&gt;Pipeline details&lt;/a&gt;.&#39;</span>
            <span class="n">IPython</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">display</span><span class="p">(</span><span class="n">IPython</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">HTML</span><span class="p">(</span><span class="n">html</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">response</span></div>

<div class="viewcode-block" id="Client.upload_pipeline_version"><a class="viewcode-back" href="../../../source/client.html#kfp.client.Client.upload_pipeline_version">[docs]</a>    <span class="k">def</span> <span class="nf">upload_pipeline_version</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">pipeline_package_path</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">pipeline_version_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">pipeline_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">pipeline_name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">description</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">kfp_server_api</span><span class="o">.</span><span class="n">ApiPipelineVersion</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Uploads a new version of the pipeline to the KFP cluster.</span>

<span class="sd">        Args:</span>
<span class="sd">            pipeline_package_path: Local path to the pipeline package.</span>
<span class="sd">            pipeline_version_name:  Name of the pipeline version to be shown in</span>
<span class="sd">                the UI.</span>
<span class="sd">            pipeline_id (Optional): Id of the pipeline.</span>
<span class="sd">            pipeline_name (Optional): Name of the pipeline.</span>
<span class="sd">            description (Optional): Description of the pipeline version to be</span>
<span class="sd">                shown in the UI.</span>

<span class="sd">        Returns:</span>
<span class="sd">            kfp_server_api.ApiPipelineVersion: ApiPipelineVersion object.</span>

<span class="sd">        Raises:</span>
<span class="sd">            ValueError: when none or both of pipeline_id or pipeline_name are</span>
<span class="sd">                specified.</span>
<span class="sd">            kfp_server_api.ApiException: If pipeline id is not found.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="nb">all</span><span class="p">([</span><span class="n">pipeline_id</span><span class="p">,</span> <span class="n">pipeline_name</span>
               <span class="p">])</span> <span class="ow">or</span> <span class="ow">not</span> <span class="nb">any</span><span class="p">([</span><span class="n">pipeline_id</span><span class="p">,</span> <span class="n">pipeline_name</span><span class="p">]):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Either pipeline_id or pipeline_name is required&#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">pipeline_name</span><span class="p">:</span>
            <span class="n">pipeline_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_pipeline_id</span><span class="p">(</span><span class="n">pipeline_name</span><span class="p">)</span>
        <span class="n">kwargs</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span>
            <span class="n">name</span><span class="o">=</span><span class="n">pipeline_version_name</span><span class="p">,</span>
            <span class="n">pipelineid</span><span class="o">=</span><span class="n">pipeline_id</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="k">if</span> <span class="n">description</span><span class="p">:</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;description&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">description</span>

        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_upload_api</span><span class="o">.</span><span class="n">upload_pipeline_version</span><span class="p">(</span>
            <span class="n">pipeline_package_path</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_ipython</span><span class="p">():</span>
            <span class="kn">import</span> <span class="nn">IPython</span>
            <span class="n">html</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;&lt;a href=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_get_url_prefix</span><span class="p">()</span><span class="si">}</span><span class="s1">/#/pipelines/details/</span><span class="si">{</span><span class="n">response</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s1">&gt;Pipeline details&lt;/a&gt;.&#39;</span>
            <span class="n">IPython</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">display</span><span class="p">(</span><span class="n">IPython</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">HTML</span><span class="p">(</span><span class="n">html</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">response</span></div>

<div class="viewcode-block" id="Client.get_pipeline"><a class="viewcode-back" href="../../../source/client.html#kfp.client.Client.get_pipeline">[docs]</a>    <span class="k">def</span> <span class="nf">get_pipeline</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pipeline_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">kfp_server_api</span><span class="o">.</span><span class="n">ApiPipeline</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Gets pipeline details.</span>

<span class="sd">        Args:</span>
<span class="sd">            pipeline_id: id of the pipeline.</span>

<span class="sd">        Returns:</span>
<span class="sd">            kfp_server_api.ApiPipeline: ApiPipeline object.</span>

<span class="sd">        Raises:</span>
<span class="sd">            kfp_server_api.ApiException: If pipeline is not found.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pipelines_api</span><span class="o">.</span><span class="n">get_pipeline</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="n">pipeline_id</span><span class="p">)</span></div>

<div class="viewcode-block" id="Client.delete_pipeline"><a class="viewcode-back" href="../../../source/client.html#kfp.client.Client.delete_pipeline">[docs]</a>    <span class="k">def</span> <span class="nf">delete_pipeline</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pipeline_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Deletes a pipeline.</span>

<span class="sd">        Args:</span>
<span class="sd">            pipeline_id: id of the pipeline.</span>

<span class="sd">        Returns:</span>
<span class="sd">            dict: Empty dictionary.</span>

<span class="sd">        Raises:</span>
<span class="sd">            kfp_server_api.ApiException: If pipeline is not found.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pipelines_api</span><span class="o">.</span><span class="n">delete_pipeline</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="n">pipeline_id</span><span class="p">)</span></div>

<div class="viewcode-block" id="Client.list_pipeline_versions"><a class="viewcode-back" href="../../../source/client.html#kfp.client.Client.list_pipeline_versions">[docs]</a>    <span class="k">def</span> <span class="nf">list_pipeline_versions</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">pipeline_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">page_token</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
        <span class="n">page_size</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">10</span><span class="p">,</span>
        <span class="n">sort_by</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
        <span class="nb">filter</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">kfp_server_api</span><span class="o">.</span><span class="n">ApiListPipelineVersionsResponse</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Lists pipeline versions.</span>

<span class="sd">        Args:</span>
<span class="sd">            pipeline_id: Id of the pipeline to list versions</span>
<span class="sd">            page_token: Token for starting of the page.</span>
<span class="sd">            page_size: Size of the page.</span>
<span class="sd">            sort_by: One of &#39;field_name&#39;, &#39;field_name desc&#39;. For example,</span>
<span class="sd">                &#39;name desc&#39;.</span>
<span class="sd">            filter: A url-encoded, JSON-serialized Filter protocol buffer</span>
<span class="sd">                (see [filter.proto](https://github.com/kubeflow/pipelines/blob/master/backend/api/filter.proto)).</span>

<span class="sd">                An example filter string would be:</span>

<span class="sd">                    # For the list of filter operations please see:</span>
<span class="sd">                    # https://github.com/kubeflow/pipelines/blob/master/sdk/python/kfp/_client.py#L40</span>
<span class="sd">                    json.dumps({</span>
<span class="sd">                        &quot;predicates&quot;: [{</span>
<span class="sd">                            &quot;op&quot;: _FILTER_OPERATIONS[&quot;EQUALS&quot;],</span>
<span class="sd">                            &quot;key&quot;: &quot;name&quot;,</span>
<span class="sd">                            &quot;stringValue&quot;: &quot;my-name&quot;,</span>
<span class="sd">                        }]</span>
<span class="sd">                    })</span>

<span class="sd">        Returns:</span>
<span class="sd">            kfp_server_api.ApiListPipelineVersionsResponse: ApiListPipelineVersionsResponse object.</span>

<span class="sd">        Raises:</span>
<span class="sd">            kfp_server_api.ApiException: If pipeline is not found.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pipelines_api</span><span class="o">.</span><span class="n">list_pipeline_versions</span><span class="p">(</span>
            <span class="n">page_token</span><span class="o">=</span><span class="n">page_token</span><span class="p">,</span>
            <span class="n">page_size</span><span class="o">=</span><span class="n">page_size</span><span class="p">,</span>
            <span class="n">sort_by</span><span class="o">=</span><span class="n">sort_by</span><span class="p">,</span>
            <span class="n">resource_key_type</span><span class="o">=</span><span class="n">kfp_server_api</span><span class="o">.</span><span class="n">ApiResourceType</span><span class="o">.</span><span class="n">PIPELINE</span><span class="p">,</span>
            <span class="n">resource_key_id</span><span class="o">=</span><span class="n">pipeline_id</span><span class="p">,</span>
            <span class="nb">filter</span><span class="o">=</span><span class="nb">filter</span><span class="p">)</span></div>

<div class="viewcode-block" id="Client.get_pipeline_version"><a class="viewcode-back" href="../../../source/client.html#kfp.client.Client.get_pipeline_version">[docs]</a>    <span class="k">def</span> <span class="nf">get_pipeline_version</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span> <span class="n">version_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">kfp_server_api</span><span class="o">.</span><span class="n">ApiPipelineVersion</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Gets a pipeline version.</span>

<span class="sd">        Args:</span>
<span class="sd">            version_id: id of the pipeline version.</span>

<span class="sd">        Returns:</span>
<span class="sd">            kfp_server_api.ApiPipelineVersion: ApiPipelineVersion object.</span>

<span class="sd">        Raises:</span>
<span class="sd">            kfp_server_api.ApiException: If pipeline version is not found.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pipelines_api</span><span class="o">.</span><span class="n">get_pipeline_version</span><span class="p">(</span><span class="n">version_id</span><span class="o">=</span><span class="n">version_id</span><span class="p">)</span></div>

<div class="viewcode-block" id="Client.delete_pipeline_version"><a class="viewcode-back" href="../../../source/client.html#kfp.client.Client.delete_pipeline_version">[docs]</a>    <span class="k">def</span> <span class="nf">delete_pipeline_version</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">version_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Deletes a pipeline version.</span>

<span class="sd">        Args:</span>
<span class="sd">            version_id: id of the pipeline version.</span>

<span class="sd">        Returns:</span>
<span class="sd">            dict: Empty dictionary.</span>

<span class="sd">        Raises:</span>
<span class="sd">            kfp_server_api.ApiException: If pipeline is not found.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pipelines_api</span><span class="o">.</span><span class="n">delete_pipeline_version</span><span class="p">(</span>
            <span class="n">version_id</span><span class="o">=</span><span class="n">version_id</span><span class="p">)</span></div></div>


<span class="k">def</span> <span class="nf">_add_generated_apis</span><span class="p">(</span><span class="n">target_struct</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span> <span class="n">api_module</span><span class="p">:</span> <span class="n">ModuleType</span><span class="p">,</span>
                        <span class="n">api_client</span><span class="p">:</span> <span class="n">kfp_server_api</span><span class="o">.</span><span class="n">ApiClient</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Initializes a hierarchical API object based on the generated API module.</span>

<span class="sd">    PipelineServiceApi.create_pipeline becomes</span>
<span class="sd">    target_struct.pipelines.create_pipeline</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">Struct</span> <span class="o">=</span> <span class="nb">type</span><span class="p">(</span><span class="s1">&#39;Struct&#39;</span><span class="p">,</span> <span class="p">(),</span> <span class="p">{})</span>

    <span class="k">def</span> <span class="nf">camel_case_to_snake_case</span><span class="p">(</span><span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="s1">&#39;([a-z0-9])([A-Z])&#39;</span><span class="p">,</span> <span class="sa">r</span><span class="s1">&#39;\1_\2&#39;</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>

    <span class="k">for</span> <span class="n">api_name</span> <span class="ow">in</span> <span class="nb">dir</span><span class="p">(</span><span class="n">api_module</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">api_name</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s1">&#39;ServiceApi&#39;</span><span class="p">):</span>
            <span class="k">continue</span>

        <span class="n">short_api_name</span> <span class="o">=</span> <span class="n">camel_case_to_snake_case</span><span class="p">(</span>
            <span class="n">api_name</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="s1">&#39;ServiceApi&#39;</span><span class="p">)])</span> <span class="o">+</span> <span class="s1">&#39;s&#39;</span>
        <span class="n">api_struct</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">()</span>
        <span class="nb">setattr</span><span class="p">(</span><span class="n">target_struct</span><span class="p">,</span> <span class="n">short_api_name</span><span class="p">,</span> <span class="n">api_struct</span><span class="p">)</span>
        <span class="n">service_api</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">api_module</span><span class="o">.</span><span class="n">api</span><span class="p">,</span> <span class="n">api_name</span><span class="p">)</span>
        <span class="n">initialized_service_api</span> <span class="o">=</span> <span class="n">service_api</span><span class="p">(</span><span class="n">api_client</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">member_name</span> <span class="ow">in</span> <span class="nb">dir</span><span class="p">(</span><span class="n">initialized_service_api</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">member_name</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;_&#39;</span><span class="p">)</span> <span class="ow">or</span> <span class="n">member_name</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span>
                    <span class="s1">&#39;_with_http_info&#39;</span><span class="p">):</span>
                <span class="k">continue</span>

            <span class="n">bound_member</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">initialized_service_api</span><span class="p">,</span> <span class="n">member_name</span><span class="p">)</span>
            <span class="nb">setattr</span><span class="p">(</span><span class="n">api_struct</span><span class="p">,</span> <span class="n">member_name</span><span class="p">,</span> <span class="n">bound_member</span><span class="p">)</span>
    <span class="n">models_struct</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">member_name</span> <span class="ow">in</span> <span class="nb">dir</span><span class="p">(</span><span class="n">api_module</span><span class="o">.</span><span class="n">models</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">member_name</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">islower</span><span class="p">():</span>
            <span class="nb">setattr</span><span class="p">(</span><span class="n">models_struct</span><span class="p">,</span> <span class="n">member_name</span><span class="p">,</span>
                    <span class="nb">getattr</span><span class="p">(</span><span class="n">api_module</span><span class="o">.</span><span class="n">models</span><span class="p">,</span> <span class="n">member_name</span><span class="p">))</span>
    <span class="n">target_struct</span><span class="o">.</span><span class="n">api_models</span> <span class="o">=</span> <span class="n">models_struct</span>


<span class="c1"># TODO: merge with maybe_rename_for_k8s or not?</span>
<span class="k">def</span> <span class="nf">_sanitize_k8s_name</span><span class="p">(</span><span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Cleans and converts the name for k8s requirements.</span>

<span class="sd">    Args:</span>
<span class="sd">        name: The original name.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The sanitized name.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="s1">&#39;-+&#39;</span><span class="p">,</span> <span class="s1">&#39;-&#39;</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="s1">&#39;[^-_0-9A-Za-z]+&#39;</span><span class="p">,</span> <span class="s1">&#39;-&#39;</span><span class="p">,</span>
                                    <span class="n">name</span><span class="p">))</span><span class="o">.</span><span class="n">lstrip</span><span class="p">(</span><span class="s1">&#39;-&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">rstrip</span><span class="p">(</span><span class="s1">&#39;-&#39;</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">validate_pipeline_resource_name</span><span class="p">(</span><span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="n">REGEX</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;[a-z0-9]([-a-z0-9]*[a-z0-9])?(</span><span class="se">\\</span><span class="s1">.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*&#39;</span>

    <span class="k">if</span> <span class="n">re</span><span class="o">.</span><span class="n">fullmatch</span><span class="p">(</span><span class="n">REGEX</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s1">&#39;Invalid pipeline name: &quot;</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s1">&quot;. Pipeline name must conform to the regex: &quot;</span><span class="si">{</span><span class="n">REGEX</span><span class="si">}</span><span class="s1">&quot;.&#39;</span>
        <span class="p">)</span>
</code></pre></div>


              
            </article>
          </div>
        </div>
        
          <a href="#" class="md-top md-icon" data-md-component="top" data-md-state="hidden">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
            Back to top
          </a>
        
      </main>
      
        <footer class="md-footer">
  
  
  
  <div class="md-footer-meta md-typeset">
    
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-footer-copyright__highlight">
        &#169; Copyright 2022, The Kubeflow Authors.
        
    </div>
  
    Created using
    <a href="https://www.sphinx-doc.org/" target="_blank" rel="noopener">Sphinx</a>
    5.0.2.
     and
    <a href="https://github.com/jbms/sphinx-immaterial/" target="_blank" rel="noopener">Sphinx-Immaterial</a>
  
</div>
      
    </div>
    
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "../../..", "features": ["navigation.expand", "navigation.sections", "navigation.top", "search.highlight", "search.share", "toc.follow", "toc.sticky"], "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "version": {"provider": "mike", "staticVersions": [{"aliases": [], "title": "v2.0.0b1", "version": "file:///Users/cjmccarthy/workspace/pipelines/docs/_build/html/index.html#"}, {"aliases": [], "title": "v1.8.13", "version": "https://kubeflow-pipelines.readthedocs.io/en/stable/"}], "versionPath": null}}</script>
    
    
      <script src="../../../_static/javascripts/bundle.dc1bded0.min.js"></script>
    
  </body>
</html>